(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6747],{6918:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(51),i=function(){function e(){this.state=Int32Array.from(r.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>r.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===r.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%r.BLOCK_SIZE>=r.BLOCK_SIZE-8){for(var i=this.bufferLength;i<r.BLOCK_SIZE;i++)t.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(i=this.bufferLength;i<r.BLOCK_SIZE-8;i++)t.setUint8(i,0);t.setUint32(r.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),t.setUint32(r.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}var o=new Uint8Array(r.DIGEST_LENGTH);for(i=0;i<8;i++)o[4*i]=this.state[i]>>>24&255,o[4*i+1]=this.state[i]>>>16&255,o[4*i+2]=this.state[i]>>>8&255,o[4*i+3]=this.state[i]>>>0&255;return o},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],c=t[5],u=t[6],l=t[7],f=0;f<r.BLOCK_SIZE;f++){if(f<16)this.temp[f]=(255&e[4*f])<<24|(255&e[4*f+1])<<16|(255&e[4*f+2])<<8|255&e[4*f+3];else{var p=this.temp[f-2];this.temp[f]=(((p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10)+this.temp[f-7]|0)+((((p=this.temp[f-15])>>>7|p<<25)^(p>>>18|p<<14)^p>>>3)+this.temp[f-16]|0)}var h=(((a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7))+(a&c^~a&u)|0)+(l+(r.KEY[f]+this.temp[f]|0)|0)|0,d=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&i^n&o^i&o)|0;l=u,u=c,c=a,a=s+h|0,s=o,o=i,i=n,n=h+d|0}t[0]+=n,t[1]+=i,t[2]+=o,t[3]+=s,t[4]+=a,t[5]+=c,t[6]+=u,t[7]+=l},e}();t.RawSha256=i},51:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BLOCK_SIZE=64,t.DIGEST_LENGTH=32,t.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),t.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],t.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},3310:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(3933).__exportStar(n(6833),t)},6833:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3933),i=n(51),o=n(6918),s=n(6393),a=function(){function e(e){if(this.hash=new o.RawSha256,e){this.outer=new o.RawSha256;var t=function(e){var t=c(e);if(t.byteLength>i.BLOCK_SIZE){var n=new o.RawSha256;n.update(t),t=n.digest()}var r=new Uint8Array(i.BLOCK_SIZE);return r.set(t),r}(e),n=new Uint8Array(i.BLOCK_SIZE);n.set(t);for(var r=0;r<i.BLOCK_SIZE;r++)t[r]^=54,n[r]^=92;for(this.hash.update(t),this.outer.update(n),r=0;r<t.byteLength;r++)t[r]=0}}return e.prototype.update=function(e){if(("string"==typeof(t=e)?0!==t.length:0!==t.byteLength)&&!this.error)try{this.hash.update(c(e))}catch(n){this.error=n}var t},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return r.__awaiter(this,void 0,void 0,function(){return r.__generator(this,function(e){return[2,this.digestSync()]})})},e}();function c(e){return"string"==typeof e?s.fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=a},6393:(e,t,n)=>{"use strict";n.r(t),n.d(t,{fromUtf8:()=>r,toUtf8:()=>i});var r=function(e){return"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,63&i|128);else if(n+1<e.length&&55296==(64512&i)&&56320==(64512&e.charCodeAt(n+1))){var o=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n));t.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}else t.push(i>>12|224,i>>6&63|128,63&i|128)}return Uint8Array.from(t)}(e)},i=function(e){return"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):function(e){for(var t="",n=0,r=e.length;n<r;n++){var i=e[n];if(i<128)t+=String.fromCharCode(i);else if(192<=i&&i<224){var o=e[++n];t+=String.fromCharCode((31&i)<<6|63&o)}else if(240<=i&&i<365){var s="%"+[i,e[++n],e[++n],e[++n]].map(function(e){return e.toString(16)}).join("%");t+=decodeURIComponent(s)}else t+=String.fromCharCode((15&i)<<12|(63&e[++n])<<6|63&e[++n])}return t}(e)}},3833:(e,t,n)=>{"use strict";var r=n(6698),i=n(2390),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.lW=c,t.h2=50;var s=2147483647;function a(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return f(e)}return u(e,t,n)}function u(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|y(e,t),r=a(n),i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(j(e,Uint8Array)){var t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return p(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(j(e,ArrayBuffer)||e&&j(e.buffer,ArrayBuffer))return h(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(j(e,SharedArrayBuffer)||e&&j(e.buffer,SharedArrayBuffer)))return h(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return c.from(r,t,n);var i=function(e){if(c.isBuffer(e)){var t=0|d(e.length),n=a(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||V(e.length)?a(0):p(e):"Buffer"===e.type&&Array.isArray(e.data)?p(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function f(e){return l(e),a(e<0?0:0|d(e))}function p(e){for(var t=e.length<0?0:0|d(e.length),n=a(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function h(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,c.prototype),r}function d(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function y(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||j(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return F(e).length;default:if(i)return r?-1:B(e).length;t=(""+t).toLowerCase(),i=!0}}function v(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return N(this,t,n);case"latin1":case"binary":return k(this,t,n);case"base64":return O(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function b(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),V(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:_(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):_(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function _(e,t,n,r,i){var o,s=1,a=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,n/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var l=-1;for(o=n;o<a;o++)if(u(e,o)===u(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+c>a&&(n=a-c),o=n;o>=0;o--){for(var f=!0,p=0;p<c;p++)if(u(e,o+p)!==u(t,p)){f=!1;break}if(f)return o}return-1}function m(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(V(a))return s;e[n+s]=a}return s}function w(e,t,n,r){return q(B(t,e.length-n),e,n,r)}function E(e,t,n,r){return q(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function T(e,t,n,r){return q(F(t),e,n,r)}function I(e,t,n,r){return q(function(e,t){for(var n,r,i=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,i.push(n%256),i.push(r);return i}(t,e.length-n),e,n,r)}function O(e,t,n){return r.fromByteArray(0===t&&n===e.length?e:e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,c,u=e[i],l=null,f=u>239?4:u>223?3:u>191?2:1;if(i+f<=n)switch(f){case 1:u<128&&(l=u);break;case 2:128==(192&(o=e[i+1]))&&(c=(31&u)<<6|63&o)>127&&(l=c);break;case 3:s=e[i+2],128==(192&(o=e[i+1]))&&128==(192&s)&&(c=(15&u)<<12|(63&o)<<6|63&s)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:s=e[i+2],a=e[i+3],128==(192&(o=e[i+1]))&&128==(192&s)&&128==(192&a)&&(c=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(l=c)}null===l?(l=65533,f=1):l>65535&&(r.push((l-=65536)>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(e){var t=e.length;if(t<=S)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=S));return n}(r)}(c.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(n){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,n){return u(e,t,n)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,n){return function(e,t,n){return l(e),e<=0?a(e):void 0!==t?"string"==typeof n?a(e).fill(t,n):a(e).fill(t):a(e)}(e,t,n)},c.allocUnsafe=function(e){return f(e)},c.allocUnsafeSlow=function(e){return f(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(j(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),j(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(j(o,Uint8Array))i+o.length>r.length?c.from(o).copy(r,i):Uint8Array.prototype.set.call(r,o,i);else{if(!c.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i)}i+=o.length}return r},c.byteLength=y,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},c.prototype.toLocaleString=c.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?A(this,0,e):v.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.h2;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},o&&(c.prototype[o]=c.prototype.inspect),c.prototype.compare=function(e,t,n,r,i){if(j(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),u=this.slice(r,i),l=e.slice(t,n),f=0;f<a;++f)if(u[f]!==l[f]){o=u[f],s=l[f];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return m(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":case"latin1":case"binary":return E(this,e,t,n);case"base64":return T(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var S=4096;function N(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function k(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function C(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=G[e[o]];return i}function R(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function P(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,n,r,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function L(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(e,t,n,r,o){return t=+t,n>>>=0,o||L(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function U(e,t,n,r,o){return t=+t,n>>>=0,o||L(e,0,n,8),i.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,c.prototype),r},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||P(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||P(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||P(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||P(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||P(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){e>>>=0,t||P(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return e>>>=0,t||P(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||P(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||P(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||P(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||M(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||M(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeFloatLE=function(e,t,n){return D(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return D(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return U(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return U(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=c.isBuffer(e)?e:c.from(e,r),a=s.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var x=/[^+/0-9A-Za-z-_]/g;function B(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function F(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(x,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function j(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function V(e){return e!=e}var G=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}()},1178:function(e){e.exports=function(e){var t,n=e.localStorage||(t={},{setItem:function(e,n){t[e]=n},getItem:function(e){return t[e]},removeItem:function(e){delete t[e]}}),r=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){if(!t.hasOwnProperty(n)){var r="Unknown property, "+n+". Valid properties are:";for(var i in t)t.hasOwnProperty(i)&&(r=r+" "+i);throw new Error(r)}if(typeof e[n]!==t[n])throw new Error(a(o.INVALID_TYPE,[typeof e[n],n]))}},i=function(e,t){return function(){return e.apply(t,arguments)}},o={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."},BUFFER_FULL:{code:18,text:"AMQJS0018E Message buffer is full, maximum buffer size: {0}."}},s={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},a=function(e,t){var n=e.text;if(t)for(var r,i,o=0;o<t.length;o++)if((i=n.indexOf(r="{"+o+"}"))>0){var s=n.substring(0,i),a=n.substring(i+r.length);n=s+t[o]+a}return n},c=[0,6,77,81,73,115,100,112,3],u=[0,4,77,81,84,84,4],l=function(e,t){for(var n in this.type=e,t)t.hasOwnProperty(n)&&(this[n]=t[n])};function f(e,t){var n,r=t,i=e[t],o=i>>4,s=i&=15;t+=1;var a=0,c=1;do{if(t==e.length)return[null,r];a+=(127&(n=e[t++]))*c,c*=128}while(0!=(128&n));var u=t+a;if(u>e.length)return[null,r];var f=new l(o);switch(o){case 2:1&e[t++]&&(f.sessionPresent=!0),f.returnCode=e[t++];break;case 3:var p=s>>1&3,h=d(e,t),y=g(e,t+=2,h);t+=h,p>0&&(f.messageIdentifier=d(e,t),t+=2);var v=new w(e.subarray(t,u));1==(1&s)&&(v.retained=!0),8==(8&s)&&(v.duplicate=!0),v.qos=p,v.destinationName=y,f.payloadMessage=v;break;case 4:case 5:case 6:case 7:case 11:f.messageIdentifier=d(e,t);break;case 9:f.messageIdentifier=d(e,t),f.returnCode=e.subarray(t+=2,u)}return[f,u]}function p(e,t,n){return t[n++]=e>>8,t[n++]=e%256,n}function h(e,t,n,r){return v(e,n,r=p(t,n,r)),r+t}function d(e,t){return 256*e[t]+e[t+1]}function y(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r>2047?(55296<=r&&r<=56319&&(n++,t++),t+=3):r>127?t+=2:t++}return t}function v(e,t,n){for(var r=n,i=0;i<e.length;i++){var s=e.charCodeAt(i);if(55296<=s&&s<=56319){var c=e.charCodeAt(++i);if(isNaN(c))throw new Error(a(o.MALFORMED_UNICODE,[s,c]));s=c-56320+(s-55296<<10)+65536}s<=127?t[r++]=s:s<=2047?(t[r++]=s>>6&31|192,t[r++]=63&s|128):s<=65535?(t[r++]=s>>12&15|224,t[r++]=s>>6&63|128,t[r++]=63&s|128):(t[r++]=s>>18&7|240,t[r++]=s>>12&63|128,t[r++]=s>>6&63|128,t[r++]=63&s|128)}return t}function g(e,t,n){for(var r,i="",s=t;s<t+n;){var c=e[s++];if(c<128)r=c;else{var u=e[s++]-128;if(u<0)throw new Error(a(o.MALFORMED_UTF,[c.toString(16),u.toString(16),""]));if(c<224)r=64*(c-192)+u;else{var l=e[s++]-128;if(l<0)throw new Error(a(o.MALFORMED_UTF,[c.toString(16),u.toString(16),l.toString(16)]));if(c<240)r=4096*(c-224)+64*u+l;else{var f=e[s++]-128;if(f<0)throw new Error(a(o.MALFORMED_UTF,[c.toString(16),u.toString(16),l.toString(16),f.toString(16)]));if(!(c<248))throw new Error(a(o.MALFORMED_UTF,[c.toString(16),u.toString(16),l.toString(16),f.toString(16)]));r=262144*(c-240)+4096*u+64*l+f}}}r>65535&&(r-=65536,i+=String.fromCharCode(55296+(r>>10)),r=56320+(1023&r)),i+=String.fromCharCode(r)}return i}l.prototype.encode=function(){var e,t=(15&this.type)<<4,n=0,r=[],i=0;switch(void 0!==this.messageIdentifier&&(n+=2),this.type){case 1:switch(this.mqttVersion){case 3:n+=c.length+3;break;case 4:n+=u.length+3}n+=y(this.clientId)+2,void 0!==this.willMessage&&(n+=y(this.willMessage.destinationName)+2,(e=this.willMessage.payloadBytes)instanceof Uint8Array||(e=new Uint8Array(s)),n+=e.byteLength+2),void 0!==this.userName&&(n+=y(this.userName)+2),void 0!==this.password&&(n+=y(this.password)+2);break;case 8:t|=2;for(var o=0;o<this.topics.length;o++)r[o]=y(this.topics[o]),n+=r[o]+2;n+=this.requestedQos.length;break;case 10:for(t|=2,o=0;o<this.topics.length;o++)r[o]=y(this.topics[o]),n+=r[o]+2;break;case 6:t|=2;break;case 3:this.payloadMessage.duplicate&&(t|=8),t=t|=this.payloadMessage.qos<<1,this.payloadMessage.retained&&(t|=1),n+=(i=y(this.payloadMessage.destinationName))+2;var s=this.payloadMessage.payloadBytes;n+=s.byteLength,s instanceof ArrayBuffer?s=new Uint8Array(s):s instanceof Uint8Array||(s=new Uint8Array(s.buffer))}var a=function(e){var t=new Array(1),n=0;do{var r=e%128;(e>>=7)>0&&(r|=128),t[n++]=r}while(e>0&&n<4);return t}(n),l=a.length+1,f=new ArrayBuffer(n+l),d=new Uint8Array(f);if(d[0]=t,d.set(a,1),3==this.type)l=h(this.payloadMessage.destinationName,i,d,l);else if(1==this.type){switch(this.mqttVersion){case 3:d.set(c,l),l+=c.length;break;case 4:d.set(u,l),l+=u.length}var v=0;this.cleanSession&&(v=2),void 0!==this.willMessage&&(v|=4,v|=this.willMessage.qos<<3,this.willMessage.retained&&(v|=32)),void 0!==this.userName&&(v|=128),void 0!==this.password&&(v|=64),d[l++]=v,l=p(this.keepAliveInterval,d,l)}switch(void 0!==this.messageIdentifier&&(l=p(this.messageIdentifier,d,l)),this.type){case 1:l=h(this.clientId,y(this.clientId),d,l),void 0!==this.willMessage&&(l=h(this.willMessage.destinationName,y(this.willMessage.destinationName),d,l),l=p(e.byteLength,d,l),d.set(e,l),l+=e.byteLength),void 0!==this.userName&&(l=h(this.userName,y(this.userName),d,l)),void 0!==this.password&&(l=h(this.password,y(this.password),d,l));break;case 3:d.set(s,l);break;case 8:for(o=0;o<this.topics.length;o++)l=h(this.topics[o],r[o],d,l),d[l++]=this.requestedQos[o];break;case 10:for(o=0;o<this.topics.length;o++)l=h(this.topics[o],r[o],d,l)}return f};var b=function(e,t){this._client=e,this._keepAliveInterval=1e3*t,this.isReset=!1;var n=new l(12).encode(),r=function(e){return function(){return i.apply(e)}},i=function(){this.isReset?(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(n),this.timeout=setTimeout(r(this),this._keepAliveInterval)):(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(o.PING_TIMEOUT.code,a(o.PING_TIMEOUT)))};this.reset=function(){this.isReset=!0,clearTimeout(this.timeout),this._keepAliveInterval>0&&(this.timeout=setTimeout(r(this),this._keepAliveInterval))},this.cancel=function(){clearTimeout(this.timeout)}},_=function(e,t,n,r){t||(t=30),this.timeout=setTimeout(function(e,t,n){return function(){return e.apply(t,n)}}(n,e,r),1e3*t),this.cancel=function(){clearTimeout(this.timeout)}},m=function(t,r,i,s,c){if(!("WebSocket"in e)||null===e.WebSocket)throw new Error(a(o.UNSUPPORTED,["WebSocket"]));if(!("ArrayBuffer"in e)||null===e.ArrayBuffer)throw new Error(a(o.UNSUPPORTED,["ArrayBuffer"]));for(var u in this._trace("Paho.Client",t,r,i,s,c),this.host=r,this.port=i,this.path=s,this.uri=t,this.clientId=c,this._wsuri=null,this._localKey=r+":"+i+("/mqtt"!=s?":"+s:"")+":"+c+":",this._msg_queue=[],this._buffered_msg_queue=[],this._sentMessages={},this._receivedMessages={},this._notify_msg_sent={},this._message_identifier=1,this._sequence=0,n)0!==u.indexOf("Sent:"+this._localKey)&&0!==u.indexOf("Received:"+this._localKey)||this.restore(u)};m.prototype.host=null,m.prototype.port=null,m.prototype.path=null,m.prototype.uri=null,m.prototype.clientId=null,m.prototype.socket=null,m.prototype.connected=!1,m.prototype.maxMessageIdentifier=65536,m.prototype.connectOptions=null,m.prototype.hostIndex=null,m.prototype.onConnected=null,m.prototype.onConnectionLost=null,m.prototype.onMessageDelivered=null,m.prototype.onMessageArrived=null,m.prototype.traceFunction=null,m.prototype._msg_queue=null,m.prototype._buffered_msg_queue=null,m.prototype._connectTimeout=null,m.prototype.sendPinger=null,m.prototype.receivePinger=null,m.prototype._reconnectInterval=1,m.prototype._reconnecting=!1,m.prototype._reconnectTimeout=null,m.prototype.disconnectedPublishing=!1,m.prototype.disconnectedBufferSize=5e3,m.prototype.receiveBuffer=null,m.prototype._traceBuffer=null,m.prototype._MAX_TRACE_ENTRIES=100,m.prototype.connect=function(e){var t=this._traceMask(e,"password");if(this._trace("Client.connect",t,this.socket,this.connected),this.connected)throw new Error(a(o.INVALID_STATE,["already connected"]));if(this.socket)throw new Error(a(o.INVALID_STATE,["already connected"]));this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),this.connectOptions=e,this._reconnectInterval=1,this._reconnecting=!1,e.uris?(this.hostIndex=0,this._doConnect(e.uris[0])):this._doConnect(this.uri)},m.prototype.subscribe=function(e,t){if(this._trace("Client.subscribe",e,t),!this.connected)throw new Error(a(o.INVALID_STATE,["not connected"]));var n=new l(8);n.topics=e.constructor===Array?e:[e],void 0===t.qos&&(t.qos=0),n.requestedQos=[];for(var r=0;r<n.topics.length;r++)n.requestedQos[r]=t.qos;t.onSuccess&&(n.onSuccess=function(e){t.onSuccess({invocationContext:t.invocationContext,grantedQos:e})}),t.onFailure&&(n.onFailure=function(e){t.onFailure({invocationContext:t.invocationContext,errorCode:e,errorMessage:a(e)})}),t.timeout&&(n.timeOut=new _(this,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:o.SUBSCRIBE_TIMEOUT.code,errorMessage:a(o.SUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},m.prototype.unsubscribe=function(e,t){if(this._trace("Client.unsubscribe",e,t),!this.connected)throw new Error(a(o.INVALID_STATE,["not connected"]));var n=new l(10);n.topics=e.constructor===Array?e:[e],t.onSuccess&&(n.callback=function(){t.onSuccess({invocationContext:t.invocationContext})}),t.timeout&&(n.timeOut=new _(this,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:o.UNSUBSCRIBE_TIMEOUT.code,errorMessage:a(o.UNSUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},m.prototype.send=function(e){this._trace("Client.send",e);var t=new l(3);if(t.payloadMessage=e,this.connected)e.qos>0?this._requires_ack(t):this.onMessageDelivered&&(this._notify_msg_sent[t]=this.onMessageDelivered(t.payloadMessage)),this._schedule_message(t);else{if(!this._reconnecting||!this.disconnectedPublishing)throw new Error(a(o.INVALID_STATE,["not connected"]));if(Object.keys(this._sentMessages).length+this._buffered_msg_queue.length>this.disconnectedBufferSize)throw new Error(a(o.BUFFER_FULL,[this.disconnectedBufferSize]));e.qos>0?this._requires_ack(t):(t.sequence=++this._sequence,this._buffered_msg_queue.unshift(t))}},m.prototype.disconnect=function(){if(this._trace("Client.disconnect"),this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),!this.socket)throw new Error(a(o.INVALID_STATE,["not connecting or connected"]));var e=new l(14);this._notify_msg_sent[e]=i(this._disconnected,this),this._schedule_message(e)},m.prototype.getTraceLog=function(){if(null!==this._traceBuffer){for(var e in this._trace("Client.getTraceLog",new Date),this._trace("Client.getTraceLog in flight messages",this._sentMessages.length),this._sentMessages)this._trace("_sentMessages ",e,this._sentMessages[e]);for(var e in this._receivedMessages)this._trace("_receivedMessages ",e,this._receivedMessages[e]);return this._traceBuffer}},m.prototype.startTrace=function(){null===this._traceBuffer&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date,"@VERSION@-@BUILDLEVEL@")},m.prototype.stopTrace=function(){delete this._traceBuffer},m.prototype._doConnect=function(e){if(this.connectOptions.useSSL){var t=e.split(":");t[0]="wss",e=t.join(":")}this._wsuri=e,this.connected=!1,this.socket=this.connectOptions.mqttVersion<4?new WebSocket(e,["mqttv3.1"]):new WebSocket(e,["mqtt"]),this.socket.binaryType="arraybuffer",this.socket.onopen=i(this._on_socket_open,this),this.socket.onmessage=i(this._on_socket_message,this),this.socket.onerror=i(this._on_socket_error,this),this.socket.onclose=i(this._on_socket_close,this),this.sendPinger=new b(this,this.connectOptions.keepAliveInterval),this.receivePinger=new b(this,this.connectOptions.keepAliveInterval),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._connectTimeout=new _(this,this.connectOptions.timeout,this._disconnected,[o.CONNECT_TIMEOUT.code,a(o.CONNECT_TIMEOUT)])},m.prototype._schedule_message=function(e){this._msg_queue.unshift(e),this.connected&&this._process_queue()},m.prototype.store=function(e,t){var r={type:t.type,messageIdentifier:t.messageIdentifier,version:1};switch(t.type){case 3:t.pubRecReceived&&(r.pubRecReceived=!0),r.payloadMessage={};for(var i="",s=t.payloadMessage.payloadBytes,c=0;c<s.length;c++)s[c]<=15?i=i+"0"+s[c].toString(16):i+=s[c].toString(16);r.payloadMessage.payloadHex=i,r.payloadMessage.qos=t.payloadMessage.qos,r.payloadMessage.destinationName=t.payloadMessage.destinationName,t.payloadMessage.duplicate&&(r.payloadMessage.duplicate=!0),t.payloadMessage.retained&&(r.payloadMessage.retained=!0),0===e.indexOf("Sent:")&&(void 0===t.sequence&&(t.sequence=++this._sequence),r.sequence=t.sequence);break;default:throw Error(a(o.INVALID_STORED_DATA,[e+this._localKey+t.messageIdentifier,r]))}n.setItem(e+this._localKey+t.messageIdentifier,JSON.stringify(r))},m.prototype.restore=function(e){var t=n.getItem(e),r=JSON.parse(t),i=new l(r.type,r);switch(r.type){case 3:for(var s=r.payloadMessage.payloadHex,c=new ArrayBuffer(s.length/2),u=new Uint8Array(c),f=0;s.length>=2;){var p=parseInt(s.substring(0,2),16);s=s.substring(2,s.length),u[f++]=p}var h=new w(u);h.qos=r.payloadMessage.qos,h.destinationName=r.payloadMessage.destinationName,r.payloadMessage.duplicate&&(h.duplicate=!0),r.payloadMessage.retained&&(h.retained=!0),i.payloadMessage=h;break;default:throw Error(a(o.INVALID_STORED_DATA,[e,t]))}0===e.indexOf("Sent:"+this._localKey)?(i.payloadMessage.duplicate=!0,this._sentMessages[i.messageIdentifier]=i):0===e.indexOf("Received:"+this._localKey)&&(this._receivedMessages[i.messageIdentifier]=i)},m.prototype._process_queue=function(){for(var e=null;e=this._msg_queue.pop();)this._socket_send(e),this._notify_msg_sent[e]&&(this._notify_msg_sent[e](),delete this._notify_msg_sent[e])},m.prototype._requires_ack=function(e){var t=Object.keys(this._sentMessages).length;if(t>this.maxMessageIdentifier)throw Error("Too many messages:"+t);for(;void 0!==this._sentMessages[this._message_identifier];)this._message_identifier++;e.messageIdentifier=this._message_identifier,this._sentMessages[e.messageIdentifier]=e,3===e.type&&this.store("Sent:",e),this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)},m.prototype._on_socket_open=function(){var e=new l(1,this.connectOptions);e.clientId=this.clientId,this._socket_send(e)},m.prototype._on_socket_message=function(e){this._trace("Client._on_socket_message",e.data);for(var t=this._deframeMessages(e.data),n=0;n<t.length;n+=1)this._handleMessage(t[n])},m.prototype._deframeMessages=function(e){var t=new Uint8Array(e),n=[];if(this.receiveBuffer){var r=new Uint8Array(this.receiveBuffer.length+t.length);r.set(this.receiveBuffer),r.set(t,this.receiveBuffer.length),t=r,delete this.receiveBuffer}try{for(var i=0;i<t.length;){var s=f(t,i),c=s[0];if(i=s[1],null===c)break;n.push(c)}i<t.length&&(this.receiveBuffer=t.subarray(i))}catch(l){var u="undefined"==l.hasOwnProperty("stack")?l.stack.toString():"No Error Stack Available";return void this._disconnected(o.INTERNAL_ERROR.code,a(o.INTERNAL_ERROR,[l.message,u]))}return n},m.prototype._handleMessage=function(e){this._trace("Client._handleMessage",e);try{switch(e.type){case 2:if(this._connectTimeout.cancel(),this._reconnectTimeout&&this._reconnectTimeout.cancel(),this.connectOptions.cleanSession){for(var t in this._sentMessages)n.removeItem("Sent:"+this._localKey+(v=this._sentMessages[t]).messageIdentifier);for(var t in this._sentMessages={},this._receivedMessages)n.removeItem("Received:"+this._localKey+(d=this._receivedMessages[t]).messageIdentifier);this._receivedMessages={}}if(0!==e.returnCode){this._disconnected(o.CONNACK_RETURNCODE.code,a(o.CONNACK_RETURNCODE,[e.returnCode,s[e.returnCode]]));break}this.connected=!0,this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);var r=[];for(var i in this._sentMessages)this._sentMessages.hasOwnProperty(i)&&r.push(this._sentMessages[i]);if(this._buffered_msg_queue.length>0)for(var c=null;c=this._buffered_msg_queue.pop();)r.push(c),this.onMessageDelivered&&(this._notify_msg_sent[c]=this.onMessageDelivered(c.payloadMessage));r=r.sort(function(e,t){return e.sequence-t.sequence});for(var u=0,f=r.length;u<f;u++)if(3==(v=r[u]).type&&v.pubRecReceived){var p=new l(6,{messageIdentifier:v.messageIdentifier});this._schedule_message(p)}else this._schedule_message(v);this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});var h=!1;this._reconnecting&&(h=!0,this._reconnectInterval=1,this._reconnecting=!1),this._connected(h,this._wsuri),this._process_queue();break;case 3:this._receivePublish(e);break;case 4:(v=this._sentMessages[e.messageIdentifier])&&(delete this._sentMessages[e.messageIdentifier],n.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(v.payloadMessage));break;case 5:(v=this._sentMessages[e.messageIdentifier])&&(v.pubRecReceived=!0,p=new l(6,{messageIdentifier:e.messageIdentifier}),this.store("Sent:",v),this._schedule_message(p));break;case 6:var d=this._receivedMessages[e.messageIdentifier];n.removeItem("Received:"+this._localKey+e.messageIdentifier),d&&(this._receiveMessage(d),delete this._receivedMessages[e.messageIdentifier]);var y=new l(7,{messageIdentifier:e.messageIdentifier});this._schedule_message(y);break;case 7:var v=this._sentMessages[e.messageIdentifier];delete this._sentMessages[e.messageIdentifier],n.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(v.payloadMessage);break;case 9:(v=this._sentMessages[e.messageIdentifier])&&(v.timeOut&&v.timeOut.cancel(),128===e.returnCode[0]?v.onFailure&&v.onFailure(e.returnCode):v.onSuccess&&v.onSuccess(e.returnCode),delete this._sentMessages[e.messageIdentifier]);break;case 11:(v=this._sentMessages[e.messageIdentifier])&&(v.timeOut&&v.timeOut.cancel(),v.callback&&v.callback(),delete this._sentMessages[e.messageIdentifier]);break;case 13:this.sendPinger.reset();break;case 14:this._disconnected(o.INVALID_MQTT_MESSAGE_TYPE.code,a(o.INVALID_MQTT_MESSAGE_TYPE,[e.type]));break;default:this._disconnected(o.INVALID_MQTT_MESSAGE_TYPE.code,a(o.INVALID_MQTT_MESSAGE_TYPE,[e.type]))}}catch(b){var g="undefined"==b.hasOwnProperty("stack")?b.stack.toString():"No Error Stack Available";return void this._disconnected(o.INTERNAL_ERROR.code,a(o.INTERNAL_ERROR,[b.message,g]))}},m.prototype._on_socket_error=function(e){this._reconnecting||this._disconnected(o.SOCKET_ERROR.code,a(o.SOCKET_ERROR,[e.data]))},m.prototype._on_socket_close=function(){this._reconnecting||this._disconnected(o.SOCKET_CLOSE.code,a(o.SOCKET_CLOSE))},m.prototype._socket_send=function(e){if(1==e.type){var t=this._traceMask(e,"password");this._trace("Client._socket_send",t)}else this._trace("Client._socket_send",e);this.socket.send(e.encode()),this.sendPinger.reset()},m.prototype._receivePublish=function(e){switch(e.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(e);break;case 1:var t=new l(4,{messageIdentifier:e.messageIdentifier});this._schedule_message(t),this._receiveMessage(e);break;case 2:this._receivedMessages[e.messageIdentifier]=e,this.store("Received:",e);var n=new l(5,{messageIdentifier:e.messageIdentifier});this._schedule_message(n);break;default:throw Error("Invaild qos="+e.payloadMessage.qos)}},m.prototype._receiveMessage=function(e){this.onMessageArrived&&this.onMessageArrived(e.payloadMessage)},m.prototype._connected=function(e,t){this.onConnected&&this.onConnected(e,t)},m.prototype._reconnect=function(){this._trace("Client._reconnect"),this.connected||(this._reconnecting=!0,this.sendPinger.cancel(),this.receivePinger.cancel(),this._reconnectInterval<128&&(this._reconnectInterval=2*this._reconnectInterval),this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri))},m.prototype._disconnected=function(e,t){if(this._trace("Client._disconnected",e,t),void 0!==e&&this._reconnecting)this._reconnectTimeout=new _(this,this._reconnectInterval,this._reconnect);else if(this.sendPinger.cancel(),this.receivePinger.cancel(),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._msg_queue=[],this._buffered_msg_queue=[],this._notify_msg_sent={},this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,1===this.socket.readyState&&this.socket.close(),delete this.socket),this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1)this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex]);else if(void 0===e&&(e=o.OK.code,t=a(o.OK)),this.connected){if(this.connected=!1,this.onConnectionLost&&this.onConnectionLost({errorCode:e,errorMessage:t,reconnect:this.connectOptions.reconnect,uri:this._wsuri}),e!==o.OK.code&&this.connectOptions.reconnect)return this._reconnectInterval=1,void this._reconnect()}else 4===this.connectOptions.mqttVersion&&!1===this.connectOptions.mqttVersionExplicit?(this._trace("Failed to connect V4, dropping back to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:e,errorMessage:t})},m.prototype._trace=function(){if(this.traceFunction){var e=Array.prototype.slice.call(arguments);for(var t in e)void 0!==e[t]&&e.splice(t,1,JSON.stringify(e[t]));var n=e.join("");this.traceFunction({severity:"Debug",message:n})}if(null!==this._traceBuffer){t=0;for(var r=arguments.length;t<r;t++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),this._traceBuffer.push(0===t||void 0===arguments[t]?arguments[t]:"  "+JSON.stringify(arguments[t]))}},m.prototype._traceMask=function(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=r==t?"******":e[r]);return n};var w=function(e){var t,n;if(!("string"==typeof e||e instanceof ArrayBuffer||ArrayBuffer.isView(e)&&!(e instanceof DataView)))throw a(o.INVALID_ARGUMENT,[e,"newPayload"]);t=e;var r=0,i=!1,s=!1;Object.defineProperties(this,{payloadString:{enumerable:!0,get:function(){return"string"==typeof t?t:g(t,0,t.length)}},payloadBytes:{enumerable:!0,get:function(){if("string"==typeof t){var e=new ArrayBuffer(y(t)),n=new Uint8Array(e);return v(t,n,0),n}return t}},destinationName:{enumerable:!0,get:function(){return n},set:function(e){if("string"!=typeof e)throw new Error(a(o.INVALID_ARGUMENT,[e,"newDestinationName"]));n=e}},qos:{enumerable:!0,get:function(){return r},set:function(e){if(0!==e&&1!==e&&2!==e)throw new Error("Invalid argument:"+e);r=e}},retained:{enumerable:!0,get:function(){return i},set:function(e){if("boolean"!=typeof e)throw new Error(a(o.INVALID_ARGUMENT,[e,"newRetained"]));i=e}},topic:{enumerable:!0,get:function(){return n},set:function(e){n=e}},duplicate:{enumerable:!0,get:function(){return s},set:function(e){s=e}}})};return{Client:function(e,t,n,i){var s;if("string"!=typeof e)throw new Error(a(o.INVALID_TYPE,[typeof e,"host"]));if(2==arguments.length){i=t;var c=(s=e).match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(!c)throw new Error(a(o.INVALID_ARGUMENT,[e,"host"]));e=c[4]||c[2],t=parseInt(c[7]),n=c[8]}else{if(3==arguments.length&&(i=n,n="/mqtt"),"number"!=typeof t||t<0)throw new Error(a(o.INVALID_TYPE,[typeof t,"port"]));if("string"!=typeof n)throw new Error(a(o.INVALID_TYPE,[typeof n,"path"]));var u=-1!==e.indexOf(":")&&"["!==e.slice(0,1)&&"]"!==e.slice(-1);s="ws://"+(u?"["+e+"]":e)+":"+t+n}for(var l=0,f=0;f<i.length;f++){var p=i.charCodeAt(f);55296<=p&&p<=56319&&f++,l++}if("string"!=typeof i||l>65535)throw new Error(a(o.INVALID_ARGUMENT,[i,"clientId"]));var h=new m(s,e,t,n,i);Object.defineProperties(this,{host:{get:function(){return e},set:function(){throw new Error(a(o.UNSUPPORTED_OPERATION))}},port:{get:function(){return t},set:function(){throw new Error(a(o.UNSUPPORTED_OPERATION))}},path:{get:function(){return n},set:function(){throw new Error(a(o.UNSUPPORTED_OPERATION))}},uri:{get:function(){return s},set:function(){throw new Error(a(o.UNSUPPORTED_OPERATION))}},clientId:{get:function(){return h.clientId},set:function(){throw new Error(a(o.UNSUPPORTED_OPERATION))}},onConnected:{get:function(){return h.onConnected},set:function(e){if("function"!=typeof e)throw new Error(a(o.INVALID_TYPE,[typeof e,"onConnected"]));h.onConnected=e}},disconnectedPublishing:{get:function(){return h.disconnectedPublishing},set:function(e){h.disconnectedPublishing=e}},disconnectedBufferSize:{get:function(){return h.disconnectedBufferSize},set:function(e){h.disconnectedBufferSize=e}},onConnectionLost:{get:function(){return h.onConnectionLost},set:function(e){if("function"!=typeof e)throw new Error(a(o.INVALID_TYPE,[typeof e,"onConnectionLost"]));h.onConnectionLost=e}},onMessageDelivered:{get:function(){return h.onMessageDelivered},set:function(e){if("function"!=typeof e)throw new Error(a(o.INVALID_TYPE,[typeof e,"onMessageDelivered"]));h.onMessageDelivered=e}},onMessageArrived:{get:function(){return h.onMessageArrived},set:function(e){if("function"!=typeof e)throw new Error(a(o.INVALID_TYPE,[typeof e,"onMessageArrived"]));h.onMessageArrived=e}},trace:{get:function(){return h.traceFunction},set:function(e){if("function"!=typeof e)throw new Error(a(o.INVALID_TYPE,[typeof e,"onTrace"]));h.traceFunction=e}}}),this.connect=function(e){if(r(e=e||{},{timeout:"number",userName:"string",password:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",hosts:"object",ports:"object",reconnect:"boolean",mqttVersion:"number",mqttVersionExplicit:"boolean",uris:"object"}),void 0===e.keepAliveInterval&&(e.keepAliveInterval=60),e.mqttVersion>4||e.mqttVersion<3)throw new Error(a(o.INVALID_ARGUMENT,[e.mqttVersion,"connectOptions.mqttVersion"]));if(void 0===e.mqttVersion?(e.mqttVersionExplicit=!1,e.mqttVersion=4):e.mqttVersionExplicit=!0,void 0!==e.password&&void 0===e.userName)throw new Error(a(o.INVALID_ARGUMENT,[e.password,"connectOptions.password"]));if(e.willMessage){if(!(e.willMessage instanceof w))throw new Error(a(o.INVALID_TYPE,[e.willMessage,"connectOptions.willMessage"]));if(e.willMessage.stringPayload=null,void 0===e.willMessage.destinationName)throw new Error(a(o.INVALID_TYPE,[typeof e.willMessage.destinationName,"connectOptions.willMessage.destinationName"]))}if(void 0===e.cleanSession&&(e.cleanSession=!0),e.hosts){if(!(e.hosts instanceof Array))throw new Error(a(o.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));if(e.hosts.length<1)throw new Error(a(o.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));for(var t=!1,i=0;i<e.hosts.length;i++){if("string"!=typeof e.hosts[i])throw new Error(a(o.INVALID_TYPE,[typeof e.hosts[i],"connectOptions.hosts["+i+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(e.hosts[i])){if(0===i)t=!0;else if(!t)throw new Error(a(o.INVALID_ARGUMENT,[e.hosts[i],"connectOptions.hosts["+i+"]"]))}else if(t)throw new Error(a(o.INVALID_ARGUMENT,[e.hosts[i],"connectOptions.hosts["+i+"]"]))}if(t)e.uris=e.hosts;else{if(!e.ports)throw new Error(a(o.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(!(e.ports instanceof Array))throw new Error(a(o.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(e.hosts.length!==e.ports.length)throw new Error(a(o.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));for(e.uris=[],i=0;i<e.hosts.length;i++){if("number"!=typeof e.ports[i]||e.ports[i]<0)throw new Error(a(o.INVALID_TYPE,[typeof e.ports[i],"connectOptions.ports["+i+"]"]));var c=e.hosts[i],u=e.ports[i],l=-1!==c.indexOf(":");e.uris.push(s="ws://"+(l?"["+c+"]":c)+":"+u+n)}}}h.connect(e)},this.subscribe=function(e,t){if("string"!=typeof e&&e.constructor!==Array)throw new Error("Invalid argument:"+e);if(r(t=t||{},{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("subscribeOptions.timeout specified with no onFailure callback.");if(void 0!==t.qos&&0!==t.qos&&1!==t.qos&&2!==t.qos)throw new Error(a(o.INVALID_ARGUMENT,[t.qos,"subscribeOptions.qos"]));h.subscribe(e,t)},this.unsubscribe=function(e,t){if("string"!=typeof e&&e.constructor!==Array)throw new Error("Invalid argument:"+e);if(r(t=t||{},{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("unsubscribeOptions.timeout specified with no onFailure callback.");h.unsubscribe(e,t)},this.send=function(e,t,n,r){var i;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof w)&&"string"!=typeof e)throw new Error("Invalid argument:"+typeof e);if(void 0===(i=e).destinationName)throw new Error(a(o.INVALID_ARGUMENT,[i.destinationName,"Message.destinationName"]));h.send(i)}else(i=new w(t)).destinationName=e,arguments.length>=3&&(i.qos=n),arguments.length>=4&&(i.retained=r),h.send(i)},this.publish=function(e,t,n,r){var i;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof w)&&"string"!=typeof e)throw new Error("Invalid argument:"+typeof e);if(void 0===(i=e).destinationName)throw new Error(a(o.INVALID_ARGUMENT,[i.destinationName,"Message.destinationName"]));h.send(i)}else(i=new w(t)).destinationName=e,arguments.length>=3&&(i.qos=n),arguments.length>=4&&(i.retained=r),h.send(i)},this.disconnect=function(){h.disconnect()},this.getTraceLog=function(){return h.getTraceLog()},this.startTrace=function(){h.startTrace()},this.stopTrace=function(){h.stopTrace()},this.isConnected=function(){return h.connected}},Message:w}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},3880:(e,t,n)=>{e.exports=n(626).Observable},626:(e,t)=>{"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}t.Observable=void 0;var o=function(){return"function"==typeof Symbol},s=function(e){return o()&&Boolean(Symbol[e])},a=function(e){return s(e)?Symbol[e]:"@@"+e};o()&&!s("observable")&&(Symbol.observable=Symbol("observable"));var c=a("iterator"),u=a("observable"),l=a("species");function f(e,t){var n=e[t];if(null!=n){if("function"!=typeof n)throw new TypeError(n+" is not a function");return n}}function p(e){var t=e.constructor;return void 0!==t&&null===(t=t[l])&&(t=void 0),void 0!==t?t:E}function h(e){return e instanceof E}function d(e){d.log?d.log(e):setTimeout(function(){throw e})}function y(e){Promise.resolve().then(function(){try{e()}catch(t){d(t)}})}function v(e){var t=e._cleanup;if(void 0!==t&&(e._cleanup=void 0,t))try{if("function"==typeof t)t();else{var n=f(t,"unsubscribe");n&&n.call(t)}}catch(r){d(r)}}function g(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function b(e,t,n){e._state="running";var r=e._observer;try{var i=f(r,t);switch(t){case"next":i&&i.call(r,n);break;case"error":if(g(e),!i)throw n;i.call(r,n);break;case"complete":g(e),i&&i.call(r)}}catch(o){d(o)}"closed"===e._state?v(e):"running"===e._state&&(e._state="ready")}function _(e,t,n){if("closed"!==e._state){if("buffering"!==e._state)return"ready"!==e._state?(e._state="buffering",e._queue=[{type:t,value:n}],void y(function(){return function(e){var t=e._queue;if(t){e._queue=void 0,e._state="ready";for(var n=0;n<t.length&&(b(e,t[n].type,t[n].value),"closed"!==e._state);++n);}}(e)})):void b(e,t,n);e._queue.push({type:t,value:n})}}var m=function(){function e(t,r){n(this,e),this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";var i=new w(this);try{this._cleanup=r.call(void 0,i)}catch(o){i.error(o)}"initializing"===this._state&&(this._state="ready")}return i(e,[{key:"unsubscribe",value:function(){"closed"!==this._state&&(g(this),v(this))}},{key:"closed",get:function(){return"closed"===this._state}}]),e}(),w=function(){function e(t){n(this,e),this._subscription=t}return i(e,[{key:"next",value:function(e){_(this._subscription,"next",e)}},{key:"error",value:function(e){_(this._subscription,"error",e)}},{key:"complete",value:function(){_(this._subscription,"complete")}},{key:"closed",get:function(){return"closed"===this._subscription._state}}]),e}(),E=function(){function e(t){if(n(this,e),!(this instanceof e))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof t)throw new TypeError("Observable initializer must be a function");this._subscriber=t}return i(e,[{key:"subscribe",value:function(e){return"object"==typeof e&&null!==e||(e={next:e,error:arguments[1],complete:arguments[2]}),new m(e,this._subscriber)}},{key:"forEach",value:function(e){var t=this;return new Promise(function(n,r){if("function"==typeof e)var i=t.subscribe({next:function(t){try{e(t,o)}catch(n){r(n),i.unsubscribe()}},error:r,complete:n});else r(new TypeError(e+" is not a function"));function o(){i.unsubscribe(),n()}})}},{key:"map",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(p(this))(function(n){return t.subscribe({next:function(t){try{t=e(t)}catch(r){return n.error(r)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})})}},{key:"filter",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(p(this))(function(n){return t.subscribe({next:function(t){try{if(!e(t))return}catch(r){return n.error(r)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})})}},{key:"reduce",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=p(this),r=arguments.length>1,i=!1,o=arguments[1],s=o;return new n(function(n){return t.subscribe({next:function(t){var o=!i;if(i=!0,!o||r)try{s=e(s,t)}catch(a){return n.error(a)}else s=t},error:function(e){n.error(e)},complete:function(){if(!i&&!r)return n.error(new TypeError("Cannot reduce an empty sequence"));n.next(s),n.complete()}})})}},{key:"concat",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=p(this);return new i(function(t){var r,o=0;return function e(s){r=s.subscribe({next:function(e){t.next(e)},error:function(e){t.error(e)},complete:function(){o===n.length?(r=void 0,t.complete()):e(i.from(n[o++]))}})}(e),function(){r&&(r.unsubscribe(),r=void 0)}})}},{key:"flatMap",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=p(this);return new n(function(r){var i=[],o=t.subscribe({next:function(t){if(e)try{t=e(t)}catch(a){return r.error(a)}var o=n.from(t).subscribe({next:function(e){r.next(e)},error:function(e){r.error(e)},complete:function(){var e=i.indexOf(o);e>=0&&i.splice(e,1),s()}});i.push(o)},error:function(e){r.error(e)},complete:function(){s()}});function s(){o.closed&&0===i.length&&r.complete()}return function(){i.forEach(function(e){return e.unsubscribe()}),o.unsubscribe()}})}},{key:u,value:function(){return this}}],[{key:"from",value:function(t){var n="function"==typeof this?this:e;if(null==t)throw new TypeError(t+" is not an object");var r=f(t,u);if(r){var i=r.call(t);if(Object(i)!==i)throw new TypeError(i+" is not an object");return h(i)&&i.constructor===n?i:new n(function(e){return i.subscribe(e)})}if(s("iterator")&&(r=f(t,c)))return new n(function(e){y(function(){if(!e.closed){var n=!0,i=!1,o=void 0;try{for(var s,a=r.call(t)[Symbol.iterator]();!(n=(s=a.next()).done);n=!0)if(e.next(s.value),e.closed)return}catch(c){i=!0,o=c}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}e.complete()}})});if(Array.isArray(t))return new n(function(e){y(function(){if(!e.closed){for(var n=0;n<t.length;++n)if(e.next(t[n]),e.closed)return;e.complete()}})});throw new TypeError(t+" is not observable")}},{key:"of",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i="function"==typeof this?this:e;return new i(function(e){y(function(){if(!e.closed){for(var t=0;t<n.length;++t)if(e.next(n[t]),e.closed)return;e.complete()}})})}},{key:l,get:function(){return this}}]),e}();t.Observable=E,o()&&Object.defineProperty(E,Symbol("extensions"),{value:{symbol:u,hostReportError:d},configurable:!0})},6747:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GalleryPageModule:()=>jn});var r=n(1116),i=n(1462),o=n(8809),s=n(9185),a=n(4762),c=n(8724),u=n(5614),l=n(2602),f=n(4240),p=n(6860),h=n(2771),d=n(4497),y={clockOffset:0,getDateWithClockOffset:function(){return y.clockOffset?new Date((new Date).getTime()+y.clockOffset):new Date},getClockOffset:function(){return y.clockOffset},getHeaderStringFromDate:function(e){return void 0===e&&(e=y.getDateWithClockOffset()),e.toISOString().replace(/[:\-]|\.\d{3}/g,"")},getDateFromHeaderString:function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(e.match(/^(\d{4})(\d{2})(\d{2})T(\d{2})(\d{2})(\d{2}).+/),7),n=t[2],r=t[3],i=t[4],o=t[5],s=t[6];return new Date(Date.UTC(Number(t[1]),Number(n)-1,Number(r),Number(i),Number(o),Number(s)))},isClockSkewed:function(e){return Math.abs(e.getTime()-y.getDateWithClockOffset().getTime())>=3e5},isClockSkewError:function(e){if(!e.response||!e.response.headers)return!1;var t=e.response.headers;return Boolean(["BadRequestException","InvalidSignatureException"].includes(t["x-amzn-errortype"])&&(t.date||t.Date))},setClockOffset:function(e){y.clockOffset=e}},v=n(3310),g=n(4241),b=n(4476),_=function(){return(_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},m=new p.k("Signer"),w="AWS4-HMAC-SHA256",E=function(e,t){var n=new v.Sha256(e);return n.update(t),n.digestSync()},T=function(e){var t=e||"",n=new v.Sha256;return n.update(t),(0,g.N)(n.digestSync())},I=function(e){return Object.keys(e).map(function(e){return e.toLowerCase()}).sort().join(";")},O=function(e){var t,n,r=(0,b.Qc)(e.url);return[e.method||"/",encodeURIComponent(r.pathname).replace(/%2F/gi,"/"),(n=r.query,n&&0!==n.length?n.split("&").map(function(e){var t=e.split("=");if(1===t.length)return e;var n=t[1].replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()});return t[0]+"="+n}).sort(function(e,t){var n=e.split("=")[0],r=t.split("=")[0];return n===r?e<t?-1:1:n<r?-1:1}).join("&"):""),(t=e.headers,t&&0!==Object.keys(t).length?Object.keys(t).map(function(e){return{key:e.toLowerCase(),value:t[e]?t[e].trim().replace(/\s+/g," "):""}}).sort(function(e,t){return e.key<t.key?-1:1}).map(function(e){return e.key+":"+e.value}).join("\n")+"\n":""),I(e.headers),T(e.data)].join("\n")},A=function(e){var t=((0,b.Qc)(e.url).host.match(/([^\.]+)\.(?:([^\.]*)\.)?amazonaws\.com$/)||[]).slice(1,3);return"es"===t[1]&&(t=t.reverse()),{service:e.service||t[0],region:e.region||t[1]}},S=function(e,t,n){return[e,t,n,"aws4_request"].join("/")},N=function(e,t,n,r){return[e,n,r,T(t)].join("\n")},k=function(e,t,n){m.debug(n);var r=E("AWS4"+e,t),i=E(r,n.region),o=E(i,n.service);return E(o,"aws4_request")},C=function(e,t){return(0,g.N)(E(e,t))},R=function(){function e(){}return e.sign=function(e,t,n){void 0===n&&(n=null),e.headers=e.headers||{};var r=y.getDateWithClockOffset().toISOString().replace(/[:\-]|\.\d{3}/g,""),i=r.substr(0,8),o=(0,b.Qc)(e.url);e.headers.host=o.host,e.headers["x-amz-date"]=r,t.session_token&&(e.headers["X-Amz-Security-Token"]=t.session_token);var s=O(e);m.debug(s);var a=n||A(e),c=S(i,a.region,a.service),u=N(w,s,r,c),l=k(t.secret_key,i,a),f=C(l,u),p=function(e,t,n,r,i){return["AWS4-HMAC-SHA256 Credential="+t+"/"+n,"SignedHeaders="+r,"Signature="+i].join(", ")}(0,t.access_key,c,I(e.headers),f);return e.headers.Authorization=p,e},e.signUrl=function(e,t,n,r){var i="object"==typeof e?e.url:e,o="object"==typeof e?e.method:"GET",s="object"==typeof e?e.body:void 0,a=y.getDateWithClockOffset().toISOString().replace(/[:\-]|\.\d{3}/g,""),c=a.substr(0,8),u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}((0,b.Qc)(i,!0,!0),["search"]),l={host:u.host},f=n||A({url:(0,b.WU)(u)}),p=f.region,h=f.service,d=S(c,p,h),v=t.session_token&&"iotdevicegateway"!==h,g=_(_(_({"X-Amz-Algorithm":w,"X-Amz-Credential":[t.access_key,d].join("/"),"X-Amz-Date":a.substr(0,16)},v?{"X-Amz-Security-Token":""+t.session_token}:{}),r?{"X-Amz-Expires":""+r}:{}),{"X-Amz-SignedHeaders":Object.keys(l).join(",")}),m=O({method:o,url:(0,b.WU)(_(_({},u),{query:_(_({},u.query),g)})),headers:l,data:s}),E=N(w,m,a,d),T=k(t.secret_key,c,{region:p,service:h}),I=C(T,E),R=_({"X-Amz-Signature":I},t.session_token&&{"X-Amz-Security-Token":t.session_token});return(0,b.WU)({protocol:u.protocol,slashes:!0,hostname:u.hostname,port:u.port,pathname:u.pathname,query:_(_(_({},u.query),g),R)})},e}(),P=n(9982),M=n.n(P),L=function(){return(L=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},D=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},U=new p.k("RestClient"),x=function(){function e(e){this._region="us-east-1",this._service="execute-api",this._custom_header=void 0,this._cancelTokenMap=null,this.Credentials=h.cN,this._options=e,U.debug("API Options",this._options),null==this._cancelTokenMap&&(this._cancelTokenMap=new WeakMap)}return e.prototype.ajax=function(e,t,n){return r=this,void 0,o=function(){var r,i,o,s,a,c,u,l,f,p,h,v,g,_=this;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(m){switch(m.label){case 0:return U.debug(t,e),o="us-east-1",s="execute-api",a=void 0,"string"==typeof e?(r=this._parseUrl(e),i=e):(i=e.endpoint,a=e.custom_header,o=e.region,s=e.service,r=this._parseUrl(e.endpoint)),c={method:t,url:i,host:r.host,path:r.path,headers:{},data:null,responseType:"json",timeout:0,cancelToken:null},u={},d.t4.isReactNative&&(u={"User-Agent":d.t4.userAgent||"aws-amplify/0.1.x"}),l=Object.assign({},n),f=l.response,l.body&&("function"==typeof FormData&&l.body instanceof FormData?(u["Content-Type"]="multipart/form-data",c.data=l.body):(u["Content-Type"]="application/json; charset=UTF-8",c.data=JSON.stringify(l.body))),l.responseType&&(c.responseType=l.responseType),l.withCredentials&&(c.withCredentials=l.withCredentials),l.timeout&&(c.timeout=l.timeout),l.cancellableToken&&(c.cancelToken=l.cancellableToken.token),c.signerServiceInfo=l.signerServiceInfo,"function"!=typeof a?[3,2]:[4,a()];case 1:return h=m.sent(),[3,3];case 2:h=void 0,m.label=3;case 3:return p=h,c.headers=L(L(L({},u),p),l.headers),v=(0,b.Qc)(i,!0,!0),g=D(v,["search"]),c.url=(0,b.WU)(L(L({},g),{query:L(L({},g.query),l.queryStringParameters||{})})),void 0!==c.headers.Authorization?(c.headers=Object.keys(c.headers).reduce(function(e,t){return c.headers[t]&&(e[t]=c.headers[t]),e},{}),[2,this._request(c,f)]):[2,this.Credentials.get().then(function(r){return _._signed(L({},c),r,f,{region:o,service:s}).catch(function(r){if(y.isClockSkewError(r)){var i=r.response.headers,o=new Date(i&&(i.date||i.Date)),s=y.getDateFromHeaderString(c.headers["x-amz-date"]);if(y.isClockSkewed(o))return y.setClockOffset(o.getTime()-s.getTime()),_.ajax(e,t,n)}throw r})},function(e){return U.debug("No credentials available, the request will be unsigned"),_._request(c,f)})]}})},new((i=void 0)||(i=Promise))(function(e,t){function n(e){try{a(o.next(e))}catch(n){t(n)}}function s(e){try{a(o.throw(e))}catch(n){t(n)}}function a(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i(function(e){e(r)})).then(n,s)}a((o=o.apply(r,[])).next())});var r,i,o},e.prototype.get=function(e,t){return this.ajax(e,"GET",t)},e.prototype.put=function(e,t){return this.ajax(e,"PUT",t)},e.prototype.patch=function(e,t){return this.ajax(e,"PATCH",t)},e.prototype.post=function(e,t){return this.ajax(e,"POST",t)},e.prototype.del=function(e,t){return this.ajax(e,"DELETE",t)},e.prototype.head=function(e,t){return this.ajax(e,"HEAD",t)},e.prototype.cancel=function(e,t){var n=this._cancelTokenMap.get(e);return n&&n.cancel(t),!0},e.prototype.isCancel=function(e){return M().isCancel(e)},e.prototype.getCancellableToken=function(){return M().CancelToken.source()},e.prototype.updateRequestToBeCancellable=function(e,t){this._cancelTokenMap.set(e,t)},e.prototype.endpoint=function(e){var t=this,n=this._options.endpoints,r="";return Array.isArray(n)?(n.forEach(function(n){n.name===e&&(r=n.endpoint,"string"==typeof n.region?t._region=n.region:"string"==typeof t._options.region&&(t._region=t._options.region),t._service="string"==typeof n.service&&n.service||"execute-api",t._custom_header="function"==typeof n.custom_header?n.custom_header:void 0)}),r):r},e.prototype._signed=function(e,t,n,r){var i=r.service,o=r.region,s=e.signerServiceInfo,a=D(e,["signerServiceInfo"]),c={secret_key:t.secretAccessKey,access_key:t.accessKeyId,session_token:t.sessionToken},u=Object.assign({region:o||this._region||this._options.region,service:i||this._service||this._options.service},s),l=R.sign(a,c,u);return l.data&&(l.body=l.data),U.debug("Signed Request: ",l),delete l.headers.host,M()(l).then(function(e){return n?e:e.data}).catch(function(e){throw U.debug(e),e})},e.prototype._request=function(e,t){return void 0===t&&(t=!1),M()(e).then(function(e){return t?e:e.data}).catch(function(e){throw U.debug(e),e})},e.prototype._parseUrl=function(e){var t=e.split("/");return{host:t[2],path:"/"+t.slice(3).join("/")}},e}(),B=n(6638),F=function(){return(F=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},q=new p.k("RestAPI"),j=function(){function e(e){this._api=null,this.Credentials=h.cN,this._options=e,q.debug("API Options",this._options)}return e.prototype.getModuleName=function(){return"RestAPI"},e.prototype.configure=function(e){var t=e||{},n=t.API,r=void 0===n?{}:n,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(t,["API"]),o=F(F({},i),r);if(q.debug("configure Rest API",{opt:o}),o.aws_project_region){if(o.aws_cloud_logic_custom){var s=o.aws_cloud_logic_custom;o.endpoints="string"==typeof s?JSON.parse(s):s}o=Object.assign({},o,{region:o.aws_project_region,header:{}})}return Array.isArray(o.endpoints)?o.endpoints.forEach(function(e){void 0!==e.custom_header&&"function"!=typeof e.custom_header&&(q.warn("Rest API "+e.name+", custom_header should be a function"),e.custom_header=void 0)}):o.endpoints=this._options&&Array.isArray(this._options.endpoints)?this._options.endpoints:[],this._options=Object.assign({},this._options,o),this.createInstance(),this._options},e.prototype.createInstance=function(){return q.debug("create Rest API instance"),this._api=new x(this._options),this._api.Credentials=this.Credentials,!0},e.prototype.get=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.get(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(a){return Promise.reject(a.message)}},e.prototype.post=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.post(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(a){return Promise.reject(a.message)}},e.prototype.put=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.put(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(a){return Promise.reject(a.message)}},e.prototype.patch=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.patch(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(a){return Promise.reject(a.message)}},e.prototype.del=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.del(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(a){return Promise.reject(a.message)}},e.prototype.head=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.head(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(a){return Promise.reject(a.message)}},e.prototype.isCancel=function(e){return this._api.isCancel(e)},e.prototype.cancel=function(e,t){return this._api.cancel(e,t)},e.prototype.endpoint=function(e){return t=this,void 0,r=function(){return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(t){return[2,this._api.endpoint(e)]})},new((n=void 0)||(n=Promise))(function(e,i){function o(e){try{a(r.next(e))}catch(t){i(t)}}function s(e){try{a(r.throw(e))}catch(t){i(t)}}function a(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(e){e(r)})).then(o,s)}a((r=r.apply(t,[])).next())});var t,n,r},e.prototype.getEndpointInfo=function(e,t){var n=this._options.endpoints;if(!Array.isArray(n))throw new Error("API category not configured");var r=n.find(function(t){return t.name===e});if(!r)throw new Error("API "+e+" does not exist");var i={endpoint:r.endpoint+t};return"string"==typeof r.region?i.region=r.region:"string"==typeof this._options.region&&(i.region=this._options.region),i.service="string"==typeof r.service&&r.service||"execute-api",i.custom_header="function"==typeof r.custom_header?r.custom_header:void 0,i},e}(),V=new j(null);function G(e,t){for(var n,r=/\r\n|[\n\r]/g,i=1,o=t+1;(n=r.exec(e.body))&&n.index<t;)i+=1,o=t+1-(n.index+n[0].length);return{line:i,column:o}}function K(e,t){var n=e.locationOffset.column-1,r=Q(n)+e.body,i=t.line-1,o=t.line+(e.locationOffset.line-1),s=t.column+(1===t.line?n:0),a=r.split(/\r\n|[\n\r]/g);return"".concat(e.name," (").concat(o,":").concat(s,")\n")+function(e){var t=e.filter(function(e){return void 0!==e[1]}),n=0,r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done);r=!0)n=Math.max(n,s.value[0].length)}catch(c){i=!0,o=c}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return t.map(function(e){var t,r=e[1];return Q(n-(t=e[0]).length)+t+r}).join("\n")}([["".concat(o-1,": "),a[i-1]],["".concat(o,": "),a[i]],["",Q(s-1)+"^"],["".concat(o+1,": "),a[i+1]]])}function Q(e){return Array(e+1).join(" ")}function Z(e,t,n,r,i,o,s){var a=Array.isArray(t)?0!==t.length?t:void 0:t?[t]:void 0,c=n;if(!c&&a){var u=a[0];c=u&&u.loc&&u.loc.source}var l,f=r;!f&&a&&(f=a.reduce(function(e,t){return t.loc&&e.push(t.loc.start),e},[])),f&&0===f.length&&(f=void 0),r&&n?l=r.map(function(e){return G(n,e)}):a&&(l=a.reduce(function(e,t){return t.loc&&e.push(G(t.loc.source,t.loc.start)),e},[]));var p=s||o&&o.extensions;Object.defineProperties(this,{message:{value:e,enumerable:!0,writable:!0},locations:{value:l||void 0,enumerable:Boolean(l)},path:{value:i||void 0,enumerable:Boolean(i)},nodes:{value:a||void 0},source:{value:c||void 0},positions:{value:f||void 0},originalError:{value:o},extensions:{value:p||void 0,enumerable:Boolean(p)}}),o&&o.stack?Object.defineProperty(this,"stack",{value:o.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,Z):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}B.dQ.register(V),Z.prototype=Object.create(Error.prototype,{constructor:{value:Z},name:{value:"GraphQLError"},toString:{value:function(){return function(e){var t=[];if(e.nodes){var n=!0,r=!1,i=void 0;try{for(var o,s=e.nodes[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;a.loc&&t.push(K(a.loc.source,G(a.loc.source,a.loc.start)))}}catch(d){r=!0,i=d}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}else if(e.source&&e.locations){var c=e.source,u=!0,l=!1,f=void 0;try{for(var p,h=e.locations[Symbol.iterator]();!(u=(p=h.next()).done);u=!0)t.push(K(c,p.value))}catch(d){l=!0,f=d}finally{try{u||null==h.return||h.return()}finally{if(l)throw f}}}return 0===t.length?e.message:[e.message].concat(t).join("\n\n")+"\n"}(this)}}});var J={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},Y={};function z(e){return Boolean(e&&"string"==typeof e.kind)}function W(e,t,n){var r=e[t];if(r){if(!n&&"function"==typeof r)return r;var i=n?r.leave:r.enter;if("function"==typeof i)return i}else{var o=n?e.leave:e.enter;if(o){if("function"==typeof o)return o;var s=o[t];if("function"==typeof s)return s}}}function H(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:J,r=void 0,i=Array.isArray(e),o=[e],s=-1,a=[],c=void 0,u=void 0,l=void 0,f=[],p=[],h=e;do{var d=++s===o.length,y=d&&0!==a.length;if(d){if(u=0===p.length?void 0:f[f.length-1],c=l,l=p.pop(),y){if(i)c=c.slice();else{var v={};for(var g in c)c.hasOwnProperty(g)&&(v[g]=c[g]);c=v}for(var b=0,_=0;_<a.length;_++){var m=a[_][0],w=a[_][1];i&&(m-=b),i&&null===w?(c.splice(m,1),b++):c[m]=w}}s=r.index,o=r.keys,a=r.edits,i=r.inArray,r=r.prev}else{if(u=l?i?s:o[s]:void 0,null==(c=l?l[u]:h))continue;l&&f.push(u)}var E=void 0;if(!Array.isArray(c)){if(!z(c))throw new Error("Invalid AST Node: "+JSON.stringify(c));var T=W(t,c.kind,d);if(T){if((E=T.call(t,c,u,l,f,p))===Y)break;if(!1===E){if(!d){f.pop();continue}}else if(void 0!==E&&(a.push([u,E]),!d)){if(!z(E)){f.pop();continue}c=E}}}void 0===E&&y&&a.push([u,c]),d?f.pop():(r={inArray:i,index:s,keys:o,edits:a,prev:r},o=(i=Array.isArray(c))?c:n[c.kind]||[],s=-1,a=[],l&&p.push(l),l=c)}while(void 0!==r);return 0!==a.length&&(h=a[a.length-1][1]),h}(e,{leave:X})}var X={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return ee(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,r=ne("(",ee(e.variableDefinitions,", "),")"),i=ee(e.directives," "),o=e.selectionSet;return n||i||r||"query"!==t?ee([t,ee([n,r]),i,o]," "):o},VariableDefinition:function(e){var t=e.directives;return e.variable+": "+e.type+ne(" = ",e.defaultValue)+ne(" ",ee(t," "))},SelectionSet:function(e){return te(e.selections)},Field:function(e){var t=e.name,n=e.arguments,r=e.directives,i=e.selectionSet;return ee([ne("",e.alias,": ")+t+ne("(",ee(n,", "),")"),ee(r," "),i]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+ne(" ",ee(e.directives," "))},InlineFragment:function(e){var t=e.directives,n=e.selectionSet;return ee(["...",ne("on ",e.typeCondition),ee(t," "),n]," ")},FragmentDefinition:function(e){var t=e.typeCondition,n=e.variableDefinitions,r=e.directives,i=e.selectionSet;return"fragment ".concat(e.name).concat(ne("(",ee(n,", "),")")," ")+"on ".concat(t," ").concat(ne("",ee(r," ")," "))+i},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n=e.value;return e.block?function(e,t){var n=e.replace(/"""/g,'\\"""');return" "!==e[0]&&"\t"!==e[0]||-1!==e.indexOf("\n")?'"""\n'.concat(t?n:re(n),'\n"""'):'"""'.concat(n.replace(/"$/,'"\n'),'"""')}(n,"description"===t):JSON.stringify(n)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+ee(e.values,", ")+"]"},ObjectValue:function(e){return"{"+ee(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+ne("(",ee(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:function(e){var t=e.operationTypes;return ee(["schema",ee(e.directives," "),te(t)]," ")},OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:$(function(e){return ee(["scalar",e.name,ee(e.directives," ")]," ")}),ObjectTypeDefinition:$(function(e){var t=e.directives,n=e.fields;return ee(["type",e.name,ne("implements ",ee(e.interfaces," & ")),ee(t," "),te(n)]," ")}),FieldDefinition:$(function(e){var t=e.arguments,n=e.type,r=e.directives;return e.name+(t.every(function(e){return-1===e.indexOf("\n")})?ne("(",ee(t,", "),")"):ne("(\n",re(ee(t,"\n")),"\n)"))+": "+n+ne(" ",ee(r," "))}),InputValueDefinition:$(function(e){var t=e.directives;return ee([e.name+": "+e.type,ne("= ",e.defaultValue),ee(t," ")]," ")}),InterfaceTypeDefinition:$(function(e){var t=e.fields;return ee(["interface",e.name,ee(e.directives," "),te(t)]," ")}),UnionTypeDefinition:$(function(e){var t=e.types;return ee(["union",e.name,ee(e.directives," "),t&&0!==t.length?"= "+ee(t," | "):""]," ")}),EnumTypeDefinition:$(function(e){var t=e.values;return ee(["enum",e.name,ee(e.directives," "),te(t)]," ")}),EnumValueDefinition:$(function(e){return ee([e.name,ee(e.directives," ")]," ")}),InputObjectTypeDefinition:$(function(e){var t=e.fields;return ee(["input",e.name,ee(e.directives," "),te(t)]," ")}),DirectiveDefinition:$(function(e){var t=e.arguments,n=e.locations;return"directive @"+e.name+(t.every(function(e){return-1===e.indexOf("\n")})?ne("(",ee(t,", "),")"):ne("(\n",re(ee(t,"\n")),"\n)"))+" on "+ee(n," | ")}),SchemaExtension:function(e){var t=e.operationTypes;return ee(["extend schema",ee(e.directives," "),te(t)]," ")},ScalarTypeExtension:function(e){return ee(["extend scalar",e.name,ee(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.directives,n=e.fields;return ee(["extend type",e.name,ne("implements ",ee(e.interfaces," & ")),ee(t," "),te(n)]," ")},InterfaceTypeExtension:function(e){var t=e.fields;return ee(["extend interface",e.name,ee(e.directives," "),te(t)]," ")},UnionTypeExtension:function(e){var t=e.types;return ee(["extend union",e.name,ee(e.directives," "),t&&0!==t.length?"= "+ee(t," | "):""]," ")},EnumTypeExtension:function(e){var t=e.values;return ee(["extend enum",e.name,ee(e.directives," "),te(t)]," ")},InputObjectTypeExtension:function(e){var t=e.fields;return ee(["extend input",e.name,ee(e.directives," "),te(t)]," ")}};function $(e){return function(t){return ee([t.description,e(t)],"\n")}}function ee(e,t){return e?e.filter(function(e){return e}).join(t||""):""}function te(e){return e&&0!==e.length?"{\n"+re(ee(e,"\n"))+"\n}":""}function ne(e,t,n){return t?e+t+(n||""):""}function re(e){return e&&"  "+e.replace(/\n/g,"\n  ")}function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e){return e&&"object"===ie(e)?"function"==typeof e.inspect?e.inspect():Array.isArray(e)?"["+e.map(oe).join(", ")+"]":"{"+Object.keys(e).map(function(t){return"".concat(t,": ").concat(oe(e[t]))}).join(", ")+"}":"string"==typeof e?'"'+e+'"':"function"==typeof e?"[function ".concat(e.name,"]"):String(e)}function se(e,t){if(!e)throw new Error(t)}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ce=function(e,t,n){ae(this,"body",void 0),ae(this,"name",void 0),ae(this,"locationOffset",void 0),this.body=e,this.name=t||"GraphQL request",this.locationOffset=n||{line:1,column:1},this.locationOffset.line>0||se(0,"line in locationOffset is 1-indexed and must be positive"),this.locationOffset.column>0||se(0,"column in locationOffset is 1-indexed and must be positive")};function ue(e,t,n){return new Z("Syntax Error: ".concat(n),void 0,e,[t])}function le(e){for(var t=e.split(/\r\n|[\n\r]/g),n=null,r=1;r<t.length;r++){var i=t[r],o=fe(i);if(o<i.length&&(null===n||o<n)&&0===(n=o))break}if(n)for(var s=1;s<t.length;s++)t[s]=t[s].slice(n);for(;t.length>0&&pe(t[0]);)t.shift();for(;t.length>0&&pe(t[t.length-1]);)t.pop();return t.join("\n")}function fe(e){for(var t=0;t<e.length&&(" "===e[t]||"\t"===e[t]);)t++;return t}function pe(e){return fe(e)===e.length}function he(){return this.lastToken=this.token,this.token=this.lookahead()}function de(){var e=this.token;if(e.kind!==ye.EOF)do{e=e.next||(e.next=we(this,e))}while(e.kind===ye.COMMENT);return e}"function"==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(ce.prototype,Symbol.toStringTag,{get:function(){return this.constructor.name}});var ye=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function ve(e){var t=e.value;return t?"".concat(e.kind,' "').concat(t,'"'):e.kind}var ge=String.prototype.charCodeAt,be=String.prototype.slice;function _e(e,t,n,r,i,o,s){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=i,this.value=s,this.prev=o,this.next=null}function me(e){return isNaN(e)?ye.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function we(e,t){var n=e.source,r=n.body,i=r.length,o=function(e,t,n){for(var r=e.length,i=t;i<r;){var o=ge.call(e,i);if(9===o||32===o||44===o||65279===o)++i;else if(10===o)++i,++n.line,n.lineStart=i;else{if(13!==o)break;10===ge.call(e,i+1)?i+=2:++i,++n.line,n.lineStart=i}}return i}(r,t.end,e),s=e.line,a=1+o-e.lineStart;if(o>=i)return new _e(ye.EOF,i,i,s,a,t);var c=ge.call(r,o);switch(c){case 33:return new _e(ye.BANG,o,o+1,s,a,t);case 35:return function(e,t,n,r,i){var o,s=e.body,a=t;do{o=ge.call(s,++a)}while(null!==o&&(o>31||9===o));return new _e(ye.COMMENT,t,a,n,r,i,be.call(s,t+1,a))}(n,o,s,a,t);case 36:return new _e(ye.DOLLAR,o,o+1,s,a,t);case 38:return new _e(ye.AMP,o,o+1,s,a,t);case 40:return new _e(ye.PAREN_L,o,o+1,s,a,t);case 41:return new _e(ye.PAREN_R,o,o+1,s,a,t);case 46:if(46===ge.call(r,o+1)&&46===ge.call(r,o+2))return new _e(ye.SPREAD,o,o+3,s,a,t);break;case 58:return new _e(ye.COLON,o,o+1,s,a,t);case 61:return new _e(ye.EQUALS,o,o+1,s,a,t);case 64:return new _e(ye.AT,o,o+1,s,a,t);case 91:return new _e(ye.BRACKET_L,o,o+1,s,a,t);case 93:return new _e(ye.BRACKET_R,o,o+1,s,a,t);case 123:return new _e(ye.BRACE_L,o,o+1,s,a,t);case 124:return new _e(ye.PIPE,o,o+1,s,a,t);case 125:return new _e(ye.BRACE_R,o,o+1,s,a,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return function(e,t,n,r,i){for(var o=e.body,s=o.length,a=t+1,c=0;a!==s&&null!==(c=ge.call(o,a))&&(95===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122);)++a;return new _e(ye.NAME,t,a,n,r,i,be.call(o,t,a))}(n,o,s,a,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return function(e,t,n,r,i,o){var s=e.body,a=n,c=t,u=!1;if(45===a&&(a=ge.call(s,++c)),48===a){if((a=ge.call(s,++c))>=48&&a<=57)throw ue(e,c,"Invalid number, unexpected digit after 0: ".concat(me(a),"."))}else c=Ee(e,c,a),a=ge.call(s,c);return 46===a&&(u=!0,a=ge.call(s,++c),c=Ee(e,c,a),a=ge.call(s,c)),69!==a&&101!==a||(u=!0,43!==(a=ge.call(s,++c))&&45!==a||(a=ge.call(s,++c)),c=Ee(e,c,a)),new _e(u?ye.FLOAT:ye.INT,t,c,r,i,o,be.call(s,t,c))}(n,o,c,s,a,t);case 34:return 34===ge.call(r,o+1)&&34===ge.call(r,o+2)?function(e,t,n,r,i){for(var o=e.body,s=t+3,a=s,c=0,u="";s<o.length&&null!==(c=ge.call(o,s));){if(34===c&&34===ge.call(o,s+1)&&34===ge.call(o,s+2))return u+=be.call(o,a,s),new _e(ye.BLOCK_STRING,t,s+3,n,r,i,le(u));if(c<32&&9!==c&&10!==c&&13!==c)throw ue(e,s,"Invalid character within String: ".concat(me(c),"."));92===c&&34===ge.call(o,s+1)&&34===ge.call(o,s+2)&&34===ge.call(o,s+3)?(u+=be.call(o,a,s)+'"""',a=s+=4):++s}throw ue(e,s,"Unterminated string.")}(n,o,s,a,t):function(e,t,n,r,i){for(var o,s,a,c,u=e.body,l=t+1,f=l,p=0,h="";l<u.length&&null!==(p=ge.call(u,l))&&10!==p&&13!==p;){if(34===p)return h+=be.call(u,f,l),new _e(ye.STRING,t,l+1,n,r,i,h);if(p<32&&9!==p)throw ue(e,l,"Invalid character within String: ".concat(me(p),"."));if(++l,92===p){switch(h+=be.call(u,f,l-1),p=ge.call(u,l)){case 34:h+='"';break;case 47:h+="/";break;case 92:h+="\\";break;case 98:h+="\b";break;case 102:h+="\f";break;case 110:h+="\n";break;case 114:h+="\r";break;case 116:h+="\t";break;case 117:var d=(o=ge.call(u,l+1),s=ge.call(u,l+2),a=ge.call(u,l+3),c=ge.call(u,l+4),Te(o)<<12|Te(s)<<8|Te(a)<<4|Te(c));if(d<0)throw ue(e,l,"Invalid character escape sequence: "+"\\u".concat(u.slice(l+1,l+5),"."));h+=String.fromCharCode(d),l+=4;break;default:throw ue(e,l,"Invalid character escape sequence: \\".concat(String.fromCharCode(p),"."))}f=++l}}throw ue(e,l,"Unterminated string.")}(n,o,s,a,t)}throw ue(n,o,function(e){return e<32&&9!==e&&10!==e&&13!==e?"Cannot contain the invalid character ".concat(me(e),"."):39===e?"Unexpected single quote character ('), did you mean to use a double quote (\")?":"Cannot parse the unexpected character ".concat(me(e),".")}(c))}function Ee(e,t,n){var r=e.body,i=t,o=n;if(o>=48&&o<=57){do{o=ge.call(r,++i)}while(o>=48&&o<=57);return i}throw ue(e,i,"Invalid number, expected digit but got: ".concat(me(o),"."))}function Te(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}_e.prototype.toJSON=_e.prototype.inspect=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}};var Ie=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),Oe=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function Ae(e,t){var n,r,i="string"==typeof e?new ce(e):e;if(!(i instanceof ce))throw new TypeError("Must provide Source. Received: ".concat(oe(i)));return r=(n=function(e,t){var n=new _e(ye.SOF,0,0,0,0,null);return{source:e,options:t,lastToken:n,token:n,line:1,lineStart:0,advance:he,lookahead:de}}(i,t||{})).token,{kind:Ie.DOCUMENT,definitions:bt(n,ye.SOF,Ne,ye.EOF),loc:lt(n,r)}}function Se(e){var t=dt(e,ye.NAME);return{kind:Ie.NAME,value:t.value,loc:lt(e,t)}}function Ne(e){if(pt(e,ye.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":case"fragment":return ke(e);case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return We(e);case"extend":return function(e){var t=e.lookahead();if(t.kind===ye.NAME)switch(t.value){case"schema":return function(e){var t=e.token;yt(e,"extend"),yt(e,"schema");var n=Ze(e,!0),r=pt(e,ye.BRACE_L)?bt(e,ye.BRACE_L,$e,ye.BRACE_R):[];if(0===n.length&&0===r.length)throw vt(e);return{kind:Ie.SCHEMA_EXTENSION,directives:n,operationTypes:r,loc:lt(e,t)}}(e);case"scalar":return function(e){var t=e.token;yt(e,"extend"),yt(e,"scalar");var n=Se(e),r=Ze(e,!0);if(0===r.length)throw vt(e);return{kind:Ie.SCALAR_TYPE_EXTENSION,name:n,directives:r,loc:lt(e,t)}}(e);case"type":return function(e){var t=e.token;yt(e,"extend"),yt(e,"type");var n=Se(e),r=et(e),i=Ze(e,!0),o=tt(e);if(0===r.length&&0===i.length&&0===o.length)throw vt(e);return{kind:Ie.OBJECT_TYPE_EXTENSION,name:n,interfaces:r,directives:i,fields:o,loc:lt(e,t)}}(e);case"interface":return function(e){var t=e.token;yt(e,"extend"),yt(e,"interface");var n=Se(e),r=Ze(e,!0),i=tt(e);if(0===r.length&&0===i.length)throw vt(e);return{kind:Ie.INTERFACE_TYPE_EXTENSION,name:n,directives:r,fields:i,loc:lt(e,t)}}(e);case"union":return function(e){var t=e.token;yt(e,"extend"),yt(e,"union");var n=Se(e),r=Ze(e,!0),i=ot(e);if(0===r.length&&0===i.length)throw vt(e);return{kind:Ie.UNION_TYPE_EXTENSION,name:n,directives:r,types:i,loc:lt(e,t)}}(e);case"enum":return function(e){var t=e.token;yt(e,"extend"),yt(e,"enum");var n=Se(e),r=Ze(e,!0),i=st(e);if(0===r.length&&0===i.length)throw vt(e);return{kind:Ie.ENUM_TYPE_EXTENSION,name:n,directives:r,values:i,loc:lt(e,t)}}(e);case"input":return function(e){var t=e.token;yt(e,"extend"),yt(e,"input");var n=Se(e),r=Ze(e,!0),i=ct(e);if(0===r.length&&0===i.length)throw vt(e);return{kind:Ie.INPUT_OBJECT_TYPE_EXTENSION,name:n,directives:r,fields:i,loc:lt(e,t)}}(e)}throw vt(e,t)}(e)}else{if(pt(e,ye.BRACE_L))return ke(e);if(He(e))return We(e)}throw vt(e)}function ke(e){if(pt(e,ye.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":return Ce(e);case"fragment":return function(e){var t=e.token;return yt(e,"fragment"),e.options.experimentalFragmentVariables?{kind:Ie.FRAGMENT_DEFINITION,name:qe(e),variableDefinitions:Pe(e),typeCondition:(yt(e,"on"),ze(e)),directives:Ze(e,!1),selectionSet:De(e),loc:lt(e,t)}:{kind:Ie.FRAGMENT_DEFINITION,name:qe(e),typeCondition:(yt(e,"on"),ze(e)),directives:Ze(e,!1),selectionSet:De(e),loc:lt(e,t)}}(e)}else if(pt(e,ye.BRACE_L))return Ce(e);throw vt(e)}function Ce(e){var t=e.token;if(pt(e,ye.BRACE_L))return{kind:Ie.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:De(e),loc:lt(e,t)};var n,r=Re(e);return pt(e,ye.NAME)&&(n=Se(e)),{kind:Ie.OPERATION_DEFINITION,operation:r,name:n,variableDefinitions:Pe(e),directives:Ze(e,!1),selectionSet:De(e),loc:lt(e,t)}}function Re(e){var t=dt(e,ye.NAME);switch(t.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw vt(e,t)}function Pe(e){return pt(e,ye.PAREN_L)?bt(e,ye.PAREN_L,Me,ye.PAREN_R):[]}function Me(e){var t=e.token;return e.options.experimentalVariableDefinitionDirectives?{kind:Ie.VARIABLE_DEFINITION,variable:Le(e),type:(dt(e,ye.COLON),Ye(e)),defaultValue:ht(e,ye.EQUALS)?je(e,!0):void 0,directives:Ze(e,!0),loc:lt(e,t)}:{kind:Ie.VARIABLE_DEFINITION,variable:Le(e),type:(dt(e,ye.COLON),Ye(e)),defaultValue:ht(e,ye.EQUALS)?je(e,!0):void 0,loc:lt(e,t)}}function Le(e){var t=e.token;return dt(e,ye.DOLLAR),{kind:Ie.VARIABLE,name:Se(e),loc:lt(e,t)}}function De(e){var t=e.token;return{kind:Ie.SELECTION_SET,selections:bt(e,ye.BRACE_L,Ue,ye.BRACE_R),loc:lt(e,t)}}function Ue(e){return pt(e,ye.SPREAD)?function(e){var t,n=e.token;return dt(e,ye.SPREAD),pt(e,ye.NAME)&&"on"!==e.token.value?{kind:Ie.FRAGMENT_SPREAD,name:qe(e),directives:Ze(e,!1),loc:lt(e,n)}:("on"===e.token.value&&(e.advance(),t=ze(e)),{kind:Ie.INLINE_FRAGMENT,typeCondition:t,directives:Ze(e,!1),selectionSet:De(e),loc:lt(e,n)})}(e):function(e){var t,n,r=e.token,i=Se(e);return ht(e,ye.COLON)?(t=i,n=Se(e)):n=i,{kind:Ie.FIELD,alias:t,name:n,arguments:xe(e,!1),directives:Ze(e,!1),selectionSet:pt(e,ye.BRACE_L)?De(e):void 0,loc:lt(e,r)}}(e)}function xe(e,t){var n=t?Fe:Be;return pt(e,ye.PAREN_L)?bt(e,ye.PAREN_L,n,ye.PAREN_R):[]}function Be(e){var t=e.token;return{kind:Ie.ARGUMENT,name:Se(e),value:(dt(e,ye.COLON),je(e,!1)),loc:lt(e,t)}}function Fe(e){var t=e.token;return{kind:Ie.ARGUMENT,name:Se(e),value:(dt(e,ye.COLON),Ge(e)),loc:lt(e,t)}}function qe(e){if("on"===e.token.value)throw vt(e);return Se(e)}function je(e,t){var n=e.token;switch(n.kind){case ye.BRACKET_L:return function(e,t){var n=e.token;return{kind:Ie.LIST,values:gt(e,ye.BRACKET_L,t?Ge:Ke,ye.BRACKET_R),loc:lt(e,n)}}(e,t);case ye.BRACE_L:return function(e,t){var n=e.token;dt(e,ye.BRACE_L);for(var r=[];!ht(e,ye.BRACE_R);)r.push(Qe(e,t));return{kind:Ie.OBJECT,fields:r,loc:lt(e,n)}}(e,t);case ye.INT:return e.advance(),{kind:Ie.INT,value:n.value,loc:lt(e,n)};case ye.FLOAT:return e.advance(),{kind:Ie.FLOAT,value:n.value,loc:lt(e,n)};case ye.STRING:case ye.BLOCK_STRING:return Ve(e);case ye.NAME:return"true"===n.value||"false"===n.value?(e.advance(),{kind:Ie.BOOLEAN,value:"true"===n.value,loc:lt(e,n)}):"null"===n.value?(e.advance(),{kind:Ie.NULL,loc:lt(e,n)}):(e.advance(),{kind:Ie.ENUM,value:n.value,loc:lt(e,n)});case ye.DOLLAR:if(!t)return Le(e)}throw vt(e)}function Ve(e){var t=e.token;return e.advance(),{kind:Ie.STRING,value:t.value,block:t.kind===ye.BLOCK_STRING,loc:lt(e,t)}}function Ge(e){return je(e,!0)}function Ke(e){return je(e,!1)}function Qe(e,t){var n=e.token;return{kind:Ie.OBJECT_FIELD,name:Se(e),value:(dt(e,ye.COLON),je(e,t)),loc:lt(e,n)}}function Ze(e,t){for(var n=[];pt(e,ye.AT);)n.push(Je(e,t));return n}function Je(e,t){var n=e.token;return dt(e,ye.AT),{kind:Ie.DIRECTIVE,name:Se(e),arguments:xe(e,t),loc:lt(e,n)}}function Ye(e){var t,n=e.token;return ht(e,ye.BRACKET_L)?(t=Ye(e),dt(e,ye.BRACKET_R),t={kind:Ie.LIST_TYPE,type:t,loc:lt(e,n)}):t=ze(e),ht(e,ye.BANG)?{kind:Ie.NON_NULL_TYPE,type:t,loc:lt(e,n)}:t}function ze(e){var t=e.token;return{kind:Ie.NAMED_TYPE,name:Se(e),loc:lt(e,t)}}function We(e){var t=He(e)?e.lookahead():e.token;if(t.kind===ye.NAME)switch(t.value){case"schema":return function(e){var t=e.token;yt(e,"schema");var n=Ze(e,!0),r=bt(e,ye.BRACE_L,$e,ye.BRACE_R);return{kind:Ie.SCHEMA_DEFINITION,directives:n,operationTypes:r,loc:lt(e,t)}}(e);case"scalar":return function(e){var t=e.token,n=Xe(e);yt(e,"scalar");var r=Se(e),i=Ze(e,!0);return{kind:Ie.SCALAR_TYPE_DEFINITION,description:n,name:r,directives:i,loc:lt(e,t)}}(e);case"type":return function(e){var t=e.token,n=Xe(e);yt(e,"type");var r=Se(e),i=et(e),o=Ze(e,!0),s=tt(e);return{kind:Ie.OBJECT_TYPE_DEFINITION,description:n,name:r,interfaces:i,directives:o,fields:s,loc:lt(e,t)}}(e);case"interface":return function(e){var t=e.token,n=Xe(e);yt(e,"interface");var r=Se(e),i=Ze(e,!0),o=tt(e);return{kind:Ie.INTERFACE_TYPE_DEFINITION,description:n,name:r,directives:i,fields:o,loc:lt(e,t)}}(e);case"union":return function(e){var t=e.token,n=Xe(e);yt(e,"union");var r=Se(e),i=Ze(e,!0),o=ot(e);return{kind:Ie.UNION_TYPE_DEFINITION,description:n,name:r,directives:i,types:o,loc:lt(e,t)}}(e);case"enum":return function(e){var t=e.token,n=Xe(e);yt(e,"enum");var r=Se(e),i=Ze(e,!0),o=st(e);return{kind:Ie.ENUM_TYPE_DEFINITION,description:n,name:r,directives:i,values:o,loc:lt(e,t)}}(e);case"input":return function(e){var t=e.token,n=Xe(e);yt(e,"input");var r=Se(e),i=Ze(e,!0),o=ct(e);return{kind:Ie.INPUT_OBJECT_TYPE_DEFINITION,description:n,name:r,directives:i,fields:o,loc:lt(e,t)}}(e);case"directive":return function(e){var t=e.token,n=Xe(e);yt(e,"directive"),dt(e,ye.AT);var r=Se(e),i=rt(e);yt(e,"on");var o=function(e){ht(e,ye.PIPE);var t=[];do{t.push(ut(e))}while(ht(e,ye.PIPE));return t}(e);return{kind:Ie.DIRECTIVE_DEFINITION,description:n,name:r,arguments:i,locations:o,loc:lt(e,t)}}(e)}throw vt(e,t)}function He(e){return pt(e,ye.STRING)||pt(e,ye.BLOCK_STRING)}function Xe(e){if(He(e))return Ve(e)}function $e(e){var t=e.token,n=Re(e);dt(e,ye.COLON);var r=ze(e);return{kind:Ie.OPERATION_TYPE_DEFINITION,operation:n,type:r,loc:lt(e,t)}}function et(e){var t=[];if("implements"===e.token.value){e.advance(),ht(e,ye.AMP);do{t.push(ze(e))}while(ht(e,ye.AMP)||e.options.allowLegacySDLImplementsInterfaces&&pt(e,ye.NAME))}return t}function tt(e){return e.options.allowLegacySDLEmptyFields&&pt(e,ye.BRACE_L)&&e.lookahead().kind===ye.BRACE_R?(e.advance(),e.advance(),[]):pt(e,ye.BRACE_L)?bt(e,ye.BRACE_L,nt,ye.BRACE_R):[]}function nt(e){var t=e.token,n=Xe(e),r=Se(e),i=rt(e);dt(e,ye.COLON);var o=Ye(e),s=Ze(e,!0);return{kind:Ie.FIELD_DEFINITION,description:n,name:r,arguments:i,type:o,directives:s,loc:lt(e,t)}}function rt(e){return pt(e,ye.PAREN_L)?bt(e,ye.PAREN_L,it,ye.PAREN_R):[]}function it(e){var t=e.token,n=Xe(e),r=Se(e);dt(e,ye.COLON);var i,o=Ye(e);ht(e,ye.EQUALS)&&(i=Ge(e));var s=Ze(e,!0);return{kind:Ie.INPUT_VALUE_DEFINITION,description:n,name:r,type:o,defaultValue:i,directives:s,loc:lt(e,t)}}function ot(e){var t=[];if(ht(e,ye.EQUALS)){ht(e,ye.PIPE);do{t.push(ze(e))}while(ht(e,ye.PIPE))}return t}function st(e){return pt(e,ye.BRACE_L)?bt(e,ye.BRACE_L,at,ye.BRACE_R):[]}function at(e){var t=e.token,n=Xe(e),r=Se(e),i=Ze(e,!0);return{kind:Ie.ENUM_VALUE_DEFINITION,description:n,name:r,directives:i,loc:lt(e,t)}}function ct(e){return pt(e,ye.BRACE_L)?bt(e,ye.BRACE_L,it,ye.BRACE_R):[]}function ut(e){var t=e.token,n=Se(e);if(Oe.hasOwnProperty(n.value))return n;throw vt(e,t)}function lt(e,t){if(!e.options.noLocation)return new ft(t,e.lastToken,e.source)}function ft(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}function pt(e,t){return e.token.kind===t}function ht(e,t){var n=e.token.kind===t;return n&&e.advance(),n}function dt(e,t){var n=e.token;if(n.kind===t)return e.advance(),n;throw ue(e.source,n.start,"Expected ".concat(t,", found ").concat(ve(n)))}function yt(e,t){var n=e.token;if(n.kind===ye.NAME&&n.value===t)return e.advance(),n;throw ue(e.source,n.start,'Expected "'.concat(t,'", found ').concat(ve(n)))}function vt(e,t){var n=t||e.token;return ue(e.source,n.start,"Unexpected ".concat(ve(n)))}function gt(e,t,n,r){dt(e,t);for(var i=[];!ht(e,r);)i.push(n(e));return i}function bt(e,t,n,r){dt(e,t);for(var i=[n(e)];!ht(e,r);)i.push(n(e));return i}ft.prototype.toJSON=ft.prototype.inspect=function(){return{start:this.start,end:this.end}};var _t=new p.k("I18n"),mt=function(){function e(e){this._options=null,this._lang=null,this._dict={},this._options=Object.assign({},e),this._lang=this._options.language,!this._lang&&"undefined"!=typeof window&&window&&window.navigator&&(this._lang=window.navigator.language),_t.debug(this._lang)}return e.prototype.setLanguage=function(e){this._lang=e},e.prototype.get=function(e,t){if(void 0===t&&(t=void 0),!this._lang)return void 0!==t?t:e;var n=this._lang,r=this.getByLanguage(e,n);return r||(n.indexOf("-")>0&&(r=this.getByLanguage(e,n.split("-")[0])),r||(void 0!==t?t:e))},e.prototype.getByLanguage=function(e,t,n){if(void 0===n&&(n=null),!t)return n;var r=this._dict[t];return r?r[e]:n},e.prototype.putVocabulariesForLanguage=function(e,t){var n=this._dict[e];n||(n=this._dict[e]={}),Object.assign(n,t)},e.prototype.putVocabularies=function(e){var t=this;Object.keys(e).map(function(n){t.putVocabulariesForLanguage(n,e[n])})},e}(),wt=new p.k("I18n"),Et=null,Tt=null;B.dQ.register(function(){function e(){}return e.configure=function(t){return wt.debug("configure I18n"),t?(Et=Object.assign({},Et,t.I18n||t),e.createInstance(),Et):Et},e.getModuleName=function(){return"I18n"},e.createInstance=function(){wt.debug("create I18n instance"),Tt||(Tt=new mt(Et))},e.setLanguage=function(t){return e.checkConfig(),Tt.setLanguage(t)},e.get=function(t,n){return e.checkConfig()?Tt.get(t,n):void 0===n?t:n},e.putVocabulariesForLanguage=function(t,n){return e.checkConfig(),Tt.putVocabulariesForLanguage(t,n)},e.putVocabularies=function(t){return e.checkConfig(),Tt.putVocabularies(t)},e.checkConfig=function(){return Tt||(Tt=new mt(Et)),!0},e}());var It={userAgent:d.t4.userAgent},Ot="undefined"!=typeof Symbol&&"function"==typeof Symbol.for,At=Ot?Symbol.for("INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER"):"@@INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER",St=Ot?Symbol.for("INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER"):"@@INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER",Nt=n(3880);const kt=n.n(Nt)();var Ct,Rt=n(77),Pt=n(1178),Mt=n(9031),Lt=function(){return(Lt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Dt=new p.k("AbstractPubSubProvider"),Ut=function(){function e(e){void 0===e&&(e={}),this._config=e}return e.prototype.configure=function(e){return void 0===e&&(e={}),this._config=Lt(Lt({},e),this._config),Dt.debug("configure "+this.getProviderName(),this._config),this.options},e.prototype.getCategory=function(){return"PubSub"},Object.defineProperty(e.prototype,"options",{get:function(){return Lt({},this._config)},enumerable:!0,configurable:!0}),e}(),xt=(Ct=function(e,t){return(Ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Ct(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Bt=function(){return(Bt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Ft=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})},qt=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},jt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Vt=new p.k("MqttOverWSProvider"),Gt=function(){function e(){this.promises=new Map}return e.prototype.get=function(e,t){return Ft(this,void 0,void 0,function(){var n;return qt(this,function(r){return(n=this.promises.get(e))||(n=t(e),this.promises.set(e,n)),[2,n]})})},Object.defineProperty(e.prototype,"allClients",{get:function(){return Array.from(this.promises.keys())},enumerable:!0,configurable:!0}),e.prototype.remove=function(e){this.promises.delete(e)},e}(),Kt="undefined"!=typeof Symbol?Symbol("topic"):"@@topic",Qt=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,Bt(Bt({},t),{clientId:t.clientId||(0,Mt.v4)()}))||this;return n._clientsQueue=new Gt,n._topicObservers=new Map,n._clientIdObservers=new Map,n}return xt(t,e),Object.defineProperty(t.prototype,"clientId",{get:function(){return this.options.clientId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endpoint",{get:function(){return this.options.aws_pubsub_endpoint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clientsQueue",{get:function(){return this._clientsQueue},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),t.prototype.getTopicForValue=function(e){return"object"==typeof e&&e[Kt]},t.prototype.getProviderName=function(){return"MqttOverWSProvider"},t.prototype.onDisconnect=function(e){var t=this,n=e.clientId,r=e.errorCode,i=jt(e,["clientId","errorCode"]);if(0!==r){Vt.warn(n,JSON.stringify(Bt({errorCode:r},i),null,2));var o=[],s=this._clientIdObservers.get(n);if(!s)return;s.forEach(function(e){e.error("Disconnected, error code: "+r),t._topicObservers.forEach(function(t,n){t.delete(e),0===t.size&&o.push(n)})}),this._clientIdObservers.delete(n),o.forEach(function(e){t._topicObservers.delete(e)})}},t.prototype.newClient=function(e){var t=e.url,n=e.clientId;return Ft(this,void 0,void 0,function(){var e,r=this;return qt(this,function(i){switch(i.label){case 0:return Vt.debug("Creating new MQTT client",n),(e=new Pt.Client(t,n)).onMessageArrived=function(e){r._onMessage(e.destinationName,e.payloadString)},e.onConnectionLost=function(e){var t=e.errorCode,i=jt(e,["errorCode"]);r.onDisconnect(Bt({clientId:n,errorCode:t},i))},[4,new Promise(function(t,n){e.connect({useSSL:r.isSSLEnabled,mqttVersion:3,onSuccess:function(){return t(e)},onFailure:n})})];case 1:return i.sent(),[2,e]}})})},t.prototype.connect=function(e,t){return void 0===t&&(t={}),Ft(this,void 0,void 0,function(){var n=this;return qt(this,function(r){switch(r.label){case 0:return[4,this.clientsQueue.get(e,function(e){return n.newClient(Bt(Bt({},t),{clientId:e}))})];case 1:return[2,r.sent()]}})})},t.prototype.disconnect=function(e){return Ft(this,void 0,void 0,function(){var t;return qt(this,function(n){switch(n.label){case 0:return[4,this.clientsQueue.get(e,function(){return null})];case 1:return(t=n.sent())&&t.isConnected()&&t.disconnect(),this.clientsQueue.remove(e),[2]}})})},t.prototype.publish=function(e,t){return Ft(this,void 0,void 0,function(){var n,r,i,o;return qt(this,function(s){switch(s.label){case 0:return n=[].concat(e),r=JSON.stringify(t),[4,this.endpoint];case 1:return i=s.sent(),[4,this.connect(this.clientId,{url:i})];case 2:return o=s.sent(),Vt.debug("Publishing to topic(s)",n.join(","),r),n.forEach(function(e){return o.send(e,r)}),[2]}})})},t.prototype._onMessage=function(e,t){try{var n=[];this._topicObservers.forEach(function(t,r){(function(e,t){for(var n=e.split("/"),r=n.length,i=t.split("/"),o=0;o<r;++o){var s=n[o];if("#"===s)return i.length>=r;if("+"!==s&&s!==i[o])return!1}return r===i.length})(r,e)&&n.push(t)});var r=JSON.parse(t);"object"==typeof r&&(r[Kt]=e),n.forEach(function(e){e.forEach(function(e){return e.next(r)})})}catch(i){Vt.warn("Error handling message",i,t)}},t.prototype.subscribe=function(e,t){var n=this;void 0===t&&(t={});var r=[].concat(e);return Vt.debug("Subscribing to topic(s)",r.join(",")),new kt(function(e){var i;r.forEach(function(t){var r=n._topicObservers.get(t);r||(r=new Set,n._topicObservers.set(t,r)),r.add(e)});var o=t.clientId,s=void 0===o?n.clientId:o,a=n._clientIdObservers.get(s);return a||(a=new Set),a.add(e),n._clientIdObservers.set(s,a),Ft(n,void 0,void 0,function(){var n,o,a,c;return qt(this,function(u){switch(u.label){case 0:return void 0!==(n=t.url)?[3,2]:[4,this.endpoint];case 1:return a=u.sent(),[3,3];case 2:a=n,u.label=3;case 3:o=a,u.label=4;case 4:return u.trys.push([4,6,,7]),[4,this.connect(s,{url:o})];case 5:return i=u.sent(),r.forEach(function(e){i.subscribe(e)}),[3,7];case 6:return c=u.sent(),e.error(c),[3,7];case 7:return[2]}})}),function(){return Vt.debug("Unsubscribing from topic(s)",r.join(",")),i&&(n._clientIdObservers.get(s).delete(e),0===n._clientIdObservers.get(s).size&&(n.disconnect(s),n._clientIdObservers.delete(s)),r.forEach(function(t){var r=n._topicObservers.get(t)||new Set;r.delete(e),0===r.size&&(n._topicObservers.delete(t),i.isConnected()&&i.unsubscribe(t))})),null}})},t}(Ut),Zt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jt=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})},Yt=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},zt=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Wt=new p.k("AWSAppSyncProvider"),Ht=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._topicClient=new Map,t._topicAlias=new Map,t}return Zt(t,e),Object.defineProperty(t.prototype,"endpoint",{get:function(){throw new Error("Not supported")},enumerable:!0,configurable:!0}),t.prototype.getProviderName=function(){return"AWSAppSyncProvider"},t.prototype.publish=function(e,t,n){return Jt(this,void 0,void 0,function(){return Yt(this,function(e){throw new Error("Operation not supported")})})},t.prototype._cleanUp=function(e){var t=this;Array.from(this._topicClient.entries()).filter(function(t){return zt(t,2)[1].clientId===e}).map(function(e){return zt(e,1)[0]}).forEach(function(e){return t._cleanUpForTopic(e)})},t.prototype._cleanUpForTopic=function(e){this._topicClient.delete(e),this._topicAlias.delete(e)},t.prototype.onDisconnect=function(e){var t=this,n=e.clientId,r=e.errorCode,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["clientId","errorCode"]);0!==r&&(Array.from(this._topicClient.entries()).filter(function(e){return zt(e,2)[1].clientId===n}).map(function(e){return zt(e,1)[0]}).forEach(function(e){t._topicObservers.has(e)&&(t._topicObservers.get(e).forEach(function(e){e.closed||e.error(i)}),t._topicObservers.delete(e))}),this._cleanUp(n))},t.prototype.disconnect=function(t){return Jt(this,void 0,void 0,function(){return Yt(this,function(n){switch(n.label){case 0:return[4,this.clientsQueue.get(t,function(){return null})];case 1:return n.sent(),[4,e.prototype.disconnect.call(this,t)];case 2:return n.sent(),this._cleanUp(t),[2]}})})},t.prototype.subscribe=function(e,t){var n=this;void 0===t&&(t={});var r=new kt(function(r){var i=[].concat(e);return Wt.debug("Subscribing to topic(s)",i.join(",")),Jt(n,void 0,void 0,function(){var e,n,o,s,a=this;return Yt(this,function(c){switch(c.label){case 0:return i.forEach(function(e){a._topicObservers.has(e)||a._topicObservers.set(e,new Set),a._topicObservers.get(e).add(r)}),n=void 0===(e=t.mqttConnections)?[]:e,o=Object.entries(t.newSubscriptions).map(function(e){var t=zt(e,2);return[t[1].topic,t[0]]}),this._topicAlias=new Map(function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(zt(arguments[t]));return e}(Array.from(this._topicAlias.entries()),o)),s=Object.entries(i.reduce(function(e,t){var r=n.find(function(e){return e.topics.indexOf(t)>-1});if(r){var i=r.client;e[i]||(e[i]={url:r.url,topics:new Set}),e[i].topics.add(t)}return e},{})),[4,Promise.all(s.map(function(e){var t=zt(e,2),n=t[0],i=t[1],o=i.url,s=i.topics;return Jt(a,void 0,void 0,function(){var e,t,i=this;return Yt(this,function(a){switch(a.label){case 0:e=null,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.connect(n,{clientId:n,url:o})];case 2:return e=a.sent(),[3,4];case 3:return t=a.sent(),r.error({message:"Failed to connect",error:t}),r.complete(),[2,void 0];case 4:return s.forEach(function(t){e.isConnected()&&(e.subscribe(t),i._topicClient.set(t,e))}),[2,e]}})})}))];case 1:return c.sent(),[2]}})}),function(){Wt.debug("Unsubscribing from topic(s)",i.join(",")),i.forEach(function(e){var t=n._topicClient.get(e);t&&t.isConnected()&&(t.unsubscribe(e),n._topicClient.delete(e),Array.from(n._topicClient.values()).some(function(e){return e===t})||n.disconnect(t.clientId)),n._topicObservers.delete(e)})}});return kt.from(r).map(function(e){var t=n.getTopicForValue(e),r=n._topicAlias.get(t);return e.data=Object.entries(e.data).reduce(function(e,t){var n=zt(t,2);return e[r||n[0]]=n[1],e},{}),e})},t}(Qt),Xt=n(3833),$t=n(4414),en=n(1668),tn=n(3061),nn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rn=function(){return(rn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},on=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})},sn=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},an=new p.k("AWSAppSyncRealTimeProvider"),cn="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",un=[400,401,403],ln=function(e){return e.GQL_CONNECTION_INIT="connection_init",e.GQL_CONNECTION_ERROR="connection_error",e.GQL_CONNECTION_ACK="connection_ack",e.GQL_START="start",e.GQL_START_ACK="start_ack",e.GQL_DATA="data",e.GQL_CONNECTION_KEEP_ALIVE="ka",e.GQL_STOP="stop",e.GQL_COMPLETE="complete",e.GQL_ERROR="error",e}({}),fn=function(e){return e[e.PENDING=0]="PENDING",e[e.CONNECTED=1]="CONNECTED",e[e.FAILED=2]="FAILED",e}({}),pn=function(e){return e[e.CLOSED=0]="CLOSED",e[e.READY=1]="READY",e[e.CONNECTING=2]="CONNECTING",e}({}),hn={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"},dn=3e5,yn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.socketStatus=pn.CLOSED,t.keepAliveTimeout=dn,t.subscriptionObserverMap=new Map,t.promiseArray=[],t}return nn(t,e),t.prototype.getProviderName=function(){return"AWSAppSyncRealTimeProvider"},t.prototype.newClient=function(){throw new Error("Not used here")},t.prototype.publish=function(e,t,n){return on(this,void 0,void 0,function(){return sn(this,function(e){throw new Error("Operation not supported")})})},t.prototype.subscribe=function(e,t){var n=this,r=t.appSyncGraphqlEndpoint;return new kt(function(e){if(r){var i=(0,Mt.v4)();return n._startSubscriptionWithAWSAppSyncRealTime({options:t,observer:e,subscriptionId:i}).catch(function(t){e.error({errors:[rn({},new Z(wn.REALTIME_SUBSCRIPTION_INIT_ERROR+": "+t))]}),e.complete()}),function(){return on(n,void 0,void 0,function(){var e,t;return sn(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,3,4]),[4,this._waitForSubscriptionToBeConnected(i)];case 1:if(n.sent(),!(e=(this.subscriptionObserverMap.get(i)||{}).subscriptionState))return[2];if(e!==fn.CONNECTED)throw new Error("Subscription never connected");return this._sendUnsubscriptionMessage(i),[3,4];case 2:return t=n.sent(),an.debug("Error while unsubscribing "+t),[3,4];case 3:return this._removeSubscriptionObserver(i),[7];case 4:return[2]}})})}}e.error({errors:[rn({},new Z("Subscribe only available for AWS AppSync endpoint"))]}),e.complete()})},Object.defineProperty(t.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),t.prototype._startSubscriptionWithAWSAppSyncRealTime=function(e){var t=e.options,n=e.observer,r=e.subscriptionId;return on(this,void 0,void 0,function(){var e,i,o,s,a,c,u,l,f,p,h,d,y,v,g,b,_,m,w,E,T,I,O,A=this;return sn(this,function(S){switch(S.label){case 0:return e=t.appSyncGraphqlEndpoint,i=t.authenticationType,a=t.apiKey,c=t.region,l=void 0===(u=t.graphql_headers)?function(){return{}}:u,p=void 0===(f=t.additionalHeaders)?{}:f,d={query:o=t.query,variables:s=t.variables},this.subscriptionObserverMap.set(r,{observer:n,query:o,variables:s,subscriptionState:h=fn.PENDING,startAckTimeoutId:null}),y=JSON.stringify(d),g=[{}],[4,this._awsRealTimeHeaderBasedAuth({apiKey:a,appSyncGraphqlEndpoint:e,authenticationType:i,payload:y,canonicalUri:"",region:c})];case 1:return b=[rn.apply(void 0,g.concat([S.sent()]))],[4,l()];case 2:v=rn.apply(void 0,[rn.apply(void 0,[rn.apply(void 0,b.concat([S.sent()])),p]),(O={},O["x-amz-user-agent"]=It.userAgent,O)]),_={id:r,payload:{data:y,extensions:{authorization:rn({},v)}},type:ln.GQL_START},m=JSON.stringify(_),S.label=3;case 3:return S.trys.push([3,5,,6]),[4,this._initializeWebSocketConnection({apiKey:a,appSyncGraphqlEndpoint:e,authenticationType:i,region:c})];case 4:return S.sent(),[3,6];case 5:return w=S.sent(),an.debug({err:w}),n.error({errors:[rn({},new Z(wn.CONNECTION_FAILED+": "+(void 0===(E=w.message)?"":E)))]}),n.complete(),"function"==typeof(T=(this.subscriptionObserverMap.get(r)||{}).subscriptionFailedCallback)&&T(),[2];case 6:return I=this.subscriptionObserverMap.get(r),this.subscriptionObserverMap.set(r,{observer:n,subscriptionState:h,variables:s,query:o,subscriptionReadyCallback:I.subscriptionReadyCallback,subscriptionFailedCallback:I.subscriptionFailedCallback,startAckTimeoutId:setTimeout(function(){A._timeoutStartSubscriptionAck.call(A,r)},15e3)}),this.awsRealTimeSocket&&this.awsRealTimeSocket.send(m),[2]}})})},t.prototype._waitForSubscriptionToBeConnected=function(e){return on(this,void 0,void 0,function(){var t=this;return sn(this,function(n){return this.subscriptionObserverMap.get(e).subscriptionState===fn.PENDING?[2,new Promise(function(n,r){var i=t.subscriptionObserverMap.get(e);t.subscriptionObserverMap.set(e,{observer:i.observer,subscriptionState:i.subscriptionState,variables:i.variables,query:i.query,subscriptionReadyCallback:n,subscriptionFailedCallback:r})})]:[2]})})},t.prototype._sendUnsubscriptionMessage=function(e){try{if(this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===pn.READY){var t=JSON.stringify({id:e,type:ln.GQL_STOP});this.awsRealTimeSocket.send(t)}}catch(n){an.debug({err:n})}},t.prototype._removeSubscriptionObserver=function(e){this.subscriptionObserverMap.delete(e),setTimeout(this._closeSocketIfRequired.bind(this),1e3)},t.prototype._closeSocketIfRequired=function(){if(!(this.subscriptionObserverMap.size>0))if(this.awsRealTimeSocket)if(this.awsRealTimeSocket.bufferedAmount>0)setTimeout(this._closeSocketIfRequired.bind(this),1e3);else{an.debug("closing WebSocket..."),clearTimeout(this.keepAliveTimeoutId);var e=this.awsRealTimeSocket;e.onclose=void 0,e.onerror=void 0,e.close(1e3),this.awsRealTimeSocket=null,this.socketStatus=pn.CLOSED}else this.socketStatus=pn.CLOSED},t.prototype._handleIncomingSubscriptionMessage=function(e){an.debug("subscription message from AWS AppSync RealTime: "+e.data);var t=JSON.parse(e.data),n=t.id,r=void 0===n?"":n,i=t.payload,o=t.type,s=this.subscriptionObserverMap.get(r)||{},a=s.observer,c=void 0===a?null:a,u=s.query,l=void 0===u?"":u,f=s.variables,p=void 0===f?{}:f,h=s.startAckTimeoutId,d=s.subscriptionReadyCallback,y=s.subscriptionFailedCallback;if(an.debug({id:r,observer:c,query:l,variables:p}),o===ln.GQL_DATA&&i&&i.data)c?c.next(i):an.debug("observer not found for id: "+r);else{if(o===ln.GQL_START_ACK)return an.debug("subscription ready for "+JSON.stringify({query:l,variables:p})),"function"==typeof d&&d(),clearTimeout(h),$t.Xb.dispatch("api",{event:wn.SUBSCRIPTION_ACK,data:{query:l,variables:p},message:"Connection established for subscription"},"PubSub",cn),void this.subscriptionObserverMap.set(r,{observer:c,query:l,variables:p,startAckTimeoutId:null,subscriptionState:fn.CONNECTED,subscriptionReadyCallback:d,subscriptionFailedCallback:y});if(o===ln.GQL_CONNECTION_KEEP_ALIVE)return clearTimeout(this.keepAliveTimeoutId),void(this.keepAliveTimeoutId=setTimeout(this._errorDisconnect.bind(this,wn.TIMEOUT_DISCONNECT),this.keepAliveTimeout));o===ln.GQL_ERROR&&(this.subscriptionObserverMap.set(r,{observer:c,query:l,variables:p,startAckTimeoutId:h,subscriptionReadyCallback:d,subscriptionFailedCallback:y,subscriptionState:fn.FAILED}),c.error({errors:[rn({},new Z(wn.CONNECTION_FAILED+": "+JSON.stringify(i)))]}),clearTimeout(h),c.complete(),"function"==typeof y&&y())}},t.prototype._errorDisconnect=function(e){an.debug("Disconnect error: "+e),this.subscriptionObserverMap.forEach(function(t){var n=t.observer;n&&!n.closed&&n.error({errors:[rn({},new Z(e))]})}),this.subscriptionObserverMap.clear(),this.awsRealTimeSocket&&this.awsRealTimeSocket.close(),this.socketStatus=pn.CLOSED},t.prototype._timeoutStartSubscriptionAck=function(e){var t=this.subscriptionObserverMap.get(e)||{},n=t.observer,r=t.query,i=t.variables;n&&(this.subscriptionObserverMap.set(e,{observer:n,query:r,variables:i,subscriptionState:fn.FAILED}),n&&!n.closed&&(n.error({errors:[rn({},new Z("Subscription timeout "+JSON.stringify({query:r,variables:i})))]}),n.complete()),an.debug("timeoutStartSubscription",JSON.stringify({query:r,variables:i})))},t.prototype._initializeWebSocketConnection=function(e){var t=this,n=e.appSyncGraphqlEndpoint,r=e.authenticationType,i=e.apiKey,o=e.region;if(this.socketStatus!==pn.READY)return new Promise(function(e,s){return on(t,void 0,void 0,function(){var t,a,c,u,l,f,p,h,d;return sn(this,function(y){switch(y.label){case 0:if(this.promiseArray.push({res:e,rej:s}),this.socketStatus!==pn.CLOSED)return[3,5];y.label=1;case 1:return y.trys.push([1,4,,5]),this.socketStatus=pn.CONNECTING,a=n.replace("https://",t=this.isSSLEnabled?"wss://":"ws://").replace("http://",t).replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta"),c="{}",f=(l=JSON).stringify,[4,this._awsRealTimeHeaderBasedAuth({authenticationType:r,payload:c,canonicalUri:"/connect",apiKey:i,appSyncGraphqlEndpoint:n,region:o})];case 2:return u=f.apply(l,[y.sent()]),p=Xt.lW.from(u).toString("base64"),h=Xt.lW.from(c).toString("base64"),[4,this._initializeRetryableHandshake({awsRealTimeUrl:a+"?header="+p+"&payload="+h})];case 3:return y.sent(),this.promiseArray.forEach(function(e){var t=e.res;an.debug("Notifying connection successful"),t()}),this.socketStatus=pn.READY,this.promiseArray=[],[3,5];case 4:return d=y.sent(),this.promiseArray.forEach(function(e){return(0,e.rej)(d)}),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=null,this.socketStatus=pn.CLOSED,[3,5];case 5:return[2]}})})})},t.prototype._initializeRetryableHandshake=function(e){var t=e.awsRealTimeUrl;return on(this,void 0,void 0,function(){return sn(this,function(e){switch(e.label){case 0:return an.debug("Initializaling retryable Handshake"),[4,(0,en.Xm)(this._initializeHandshake.bind(this),[{awsRealTimeUrl:t}],5e3)];case 1:return e.sent(),[2]}})})},t.prototype._initializeHandshake=function(e){var t=e.awsRealTimeUrl;return on(this,void 0,void 0,function(){var e,n,r=this;return sn(this,function(i){switch(i.label){case 0:an.debug("Initializing handshake "+t),i.label=1;case 1:return i.trys.push([1,4,,5]),[4,new Promise(function(e,n){var i=new WebSocket(t,"graphql-ws");i.onerror=function(){an.debug("WebSocket connection error")},i.onclose=function(){n(new Error("Connection handshake error"))},i.onopen=function(){return r.awsRealTimeSocket=i,e()}})];case 2:return i.sent(),[4,new Promise(function(e,t){var n=!1;r.awsRealTimeSocket.onerror=function(e){an.debug("WebSocket error "+JSON.stringify(e))},r.awsRealTimeSocket.onclose=function(e){an.debug("WebSocket closed "+e.reason),t(new Error(JSON.stringify(e)))},r.awsRealTimeSocket.onmessage=function(i){an.debug("subscription message from AWS AppSyncRealTime: "+i.data+" ");var o=JSON.parse(i.data),s=o.type,a=o.payload,c=(void 0===a?{}:a).connectionTimeoutMs;if(s===ln.GQL_CONNECTION_ACK)return n=!0,r.keepAliveTimeout=void 0===c?dn:c,r.awsRealTimeSocket.onmessage=r._handleIncomingSubscriptionMessage.bind(r),r.awsRealTimeSocket.onerror=function(e){an.debug(e),r._errorDisconnect(wn.CONNECTION_CLOSED)},r.awsRealTimeSocket.onclose=function(e){an.debug("WebSocket closed "+e.reason),r._errorDisconnect(wn.CONNECTION_CLOSED)},void e("Cool, connected to AWS AppSyncRealTime");if(s===ln.GQL_CONNECTION_ERROR){var u=o.payload,l=(void 0===u?{}:u).errors,f=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(void 0===l?[]:l,1)[0],p=void 0===f?{}:f,h=p.errorType,d=p.errorCode;t({errorType:void 0===h?"":h,errorCode:void 0===d?0:d})}},r.awsRealTimeSocket.send(JSON.stringify({type:ln.GQL_CONNECTION_INIT})),setTimeout((function(){n||t(new Error("Connection timeout: ack from AWSRealTime was not received on 15000 ms"))}).bind(r),15e3)})];case 3:return i.sent(),[3,5];case 4:throw e=i.sent(),n=e.errorType,un.includes(e.errorCode)?new en.V2(n):n?new Error(n):e;case 5:return[2]}})})},t.prototype._awsRealTimeHeaderBasedAuth=function(e){var t=e.authenticationType,n=e.payload,r=e.canonicalUri,i=e.appSyncGraphqlEndpoint,o=e.apiKey,s=e.region;return on(this,void 0,void 0,function(){var e,a,c;return sn(this,function(u){switch(u.label){case 0:return e={API_KEY:this._awsRealTimeApiKeyHeader.bind(this),AWS_IAM:this._awsRealTimeIAMHeader.bind(this),OPENID_CONNECT:this._awsRealTimeOPENIDHeader.bind(this),AMAZON_COGNITO_USER_POOLS:this._awsRealTimeCUPHeader.bind(this)},"function"!=typeof(a=e[t])?(an.debug("Authentication type "+t+" not supported"),[2,""]):(c=b.Qc(i).host,[4,a({payload:n,canonicalUri:r,appSyncGraphqlEndpoint:i,apiKey:o,region:s,host:c})]);case 1:return[2,u.sent()]}})})},t.prototype._awsRealTimeCUPHeader=function(e){var t=e.host;return on(this,void 0,void 0,function(){return sn(this,function(e){switch(e.label){case 0:return[4,tn.ZP.currentSession()];case 1:return[2,{Authorization:e.sent().getAccessToken().getJwtToken(),host:t}]}})})},t.prototype._awsRealTimeOPENIDHeader=function(e){var t=e.host;return on(this,void 0,void 0,function(){var e,n,r;return sn(this,function(i){switch(i.label){case 0:return[4,f.ZP.getItem("federatedInfo")];case 1:return(n=i.sent())?(e=n.token,[3,4]):[3,2];case 2:return[4,tn.ZP.currentAuthenticatedUser()];case 3:(r=i.sent())&&(e=r.token),i.label=4;case 4:if(!e)throw new Error("No federated jwt");return[2,{Authorization:e,host:t}]}})})},t.prototype._awsRealTimeApiKeyHeader=function(e){var t=e.apiKey,n=e.host;return on(this,void 0,void 0,function(){var e,r;return sn(this,function(i){return e=new Date,r=e.toISOString().replace(/[:\-]|\.\d{3}/g,""),[2,{host:n,"x-amz-date":r,"x-api-key":t}]})})},t.prototype._awsRealTimeIAMHeader=function(e){var t=e.payload,n=e.canonicalUri,r=e.appSyncGraphqlEndpoint,i=e.region;return on(this,void 0,void 0,function(){var e,o,s;return sn(this,function(a){switch(a.label){case 0:return e={region:i,service:"appsync"},[4,this._ensureCredentials()];case 1:if(!a.sent())throw new Error("No credentials");return[4,h.cN.get().then(function(e){return{secret_key:e.secretAccessKey,access_key:e.accessKeyId,session_token:e.sessionToken}})];case 2:return o=a.sent(),s={url:""+r+n,data:t,method:"POST",headers:rn({},hn)},[2,R.sign(s,o,e).headers]}})})},t.prototype._ensureCredentials=function(){return h.cN.get().then(function(e){if(!e)return!1;var t=h.cN.shear(e);return an.debug("set credentials for AWSAppSyncRealTimeProvider",t),!0}).catch(function(e){return an.warn("ensure credentials error",e),!1})},t}(Ut),vn=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})},gn=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},bn=(0,Rt.lC)().isNode,_n=new p.k("PubSub"),mn=new(function(){function e(e){this._options=e,_n.debug("PubSub Options",this._options),this._pluggables=[],this.subscribe=this.subscribe.bind(this)}return Object.defineProperty(e.prototype,"awsAppSyncProvider",{get:function(){return this._awsAppSyncProvider||(this._awsAppSyncProvider=new Ht(this._options)),this._awsAppSyncProvider},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"awsAppSyncRealTimeProvider",{get:function(){return this._awsAppSyncRealTimeProvider||(this._awsAppSyncRealTimeProvider=new yn(this._options)),this._awsAppSyncRealTimeProvider},enumerable:!0,configurable:!0}),e.prototype.getModuleName=function(){return"PubSub"},e.prototype.configure=function(e){var t=this,n=e?e.PubSub||e:{};return _n.debug("configure PubSub",{opt:n}),this._options=Object.assign({},this._options,n),this._pluggables.map(function(e){return e.configure(t._options)}),this._options},e.prototype.addPluggable=function(e){return vn(this,void 0,void 0,function(){return gn(this,function(t){return e&&"PubSub"===e.getCategory()?(this._pluggables.push(e),[2,e.configure(this._options)]):[2]})})},e.prototype.getProviderByName=function(e){return e===At?this.awsAppSyncProvider:e===St?this.awsAppSyncRealTimeProvider:this._pluggables.find(function(t){return t.getProviderName()===e})},e.prototype.getProviders=function(e){void 0===e&&(e={});var t=e.provider;if(!t)return this._pluggables;var n=this.getProviderByName(t);if(!n)throw new Error("Could not find provider named "+t);return[n]},e.prototype.publish=function(e,t,n){return vn(this,void 0,void 0,function(){return gn(this,function(r){return[2,Promise.all(this.getProviders(n).map(function(r){return r.publish(e,t,n)}))]})})},e.prototype.subscribe=function(e,t){if(bn&&this._options&&this._options.ssr)throw new Error("Subscriptions are not supported for Server-Side Rendering (SSR)");_n.debug("subscribe options",t);var n=this.getProviders(t);return new kt(function(r){var i=n.map(function(n){return{provider:n,observable:n.subscribe(e,t)}}).map(function(e){var t=e.provider;return e.observable.subscribe({start:console.error,next:function(e){return r.next({provider:t,value:e})},error:function(e){return r.error({provider:t,error:e})}})});return function(){return i.forEach(function(e){return e.unsubscribe()})}})},e}())(null);B.dQ.register(mn);var wn=function(e){return e.CONNECTION_CLOSED="Connection closed",e.CONNECTION_FAILED="Connection failed",e.REALTIME_SUBSCRIPTION_INIT_ERROR="AppSync Realtime subscription init error",e.SUBSCRIPTION_ACK="Subscription ack",e.TIMEOUT_DISCONNECT="Timeout disconnect",e}({});const En=mn;var Tn=function(e){return e.NO_API_KEY="No api-key configured",e.NO_CURRENT_USER="No current user",e.NO_CREDENTIALS="No credentials",e.NO_FEDERATED_JWT="No federated jwt",e}({}),In=function(){return(In=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},On=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})},An=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Sn=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Nn=new p.k("GraphQLAPI"),kn=function(e,t){return void 0===t&&(t={}),{query:e,variables:t}},Cn=function(){function e(e){this._api=null,this.Auth=tn.ZP,this.Cache=f.ZP,this.Credentials=h.cN,this._options=e,Nn.debug("API Options",this._options)}return e.prototype.getModuleName=function(){return"GraphQLAPI"},e.prototype.configure=function(e){var t=e||{},n=t.API,r=void 0===n?{}:n,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(t,["API"]),o=In(In({},i),r);return Nn.debug("configure GraphQL API",{opt:o}),o.aws_project_region&&(o=Object.assign({},o,{region:o.aws_project_region,header:{}})),void 0!==o.graphql_headers&&"function"!=typeof o.graphql_headers&&(Nn.warn("graphql_headers should be a function"),o.graphql_headers=void 0),this._options=Object.assign({},this._options,o),this.createInstance(),this._options},e.prototype.createInstance=function(){return Nn.debug("create Rest instance"),this._options?(this._api=new x(this._options),this._api.Credentials=this.Credentials,!0):Promise.reject("API not configured")},e.prototype._headerBasedAuth=function(e){return On(this,void 0,void 0,function(){var t,n,r,i,o,s,a,c;return An(this,function(u){switch(u.label){case 0:switch(n=(t=this._options).aws_appsync_authenticationType,r=t.aws_appsync_apiKey,i={},e||n||"AWS_IAM"){case"API_KEY":return[3,1];case"AWS_IAM":return[3,2];case"OPENID_CONNECT":return[3,4];case"AMAZON_COGNITO_USER_POOLS":return[3,11]}return[3,15];case 1:if(!r)throw new Error(Tn.NO_API_KEY);return i={Authorization:null,"X-Api-Key":r},[3,16];case 2:return[4,this._ensureCredentials()];case 3:if(!u.sent())throw new Error(Tn.NO_CREDENTIALS);return[3,16];case 4:return u.trys.push([4,9,,10]),o=void 0,[4,f.ZP.getItem("federatedInfo")];case 5:return(s=u.sent())?(o=s.token,[3,8]):[3,6];case 6:return[4,tn.ZP.currentAuthenticatedUser()];case 7:(a=u.sent())&&(o=a.token),u.label=8;case 8:if(!o)throw new Error(Tn.NO_FEDERATED_JWT);return i={Authorization:o},[3,10];case 9:throw u.sent(),new Error(Tn.NO_CURRENT_USER);case 10:return[3,16];case 11:return u.trys.push([11,13,,14]),[4,this.Auth.currentSession()];case 12:return c=u.sent(),i={Authorization:c.getAccessToken().getJwtToken()},[3,14];case 13:throw u.sent(),new Error(Tn.NO_CURRENT_USER);case 14:return[3,16];case 15:return i={Authorization:null},[3,16];case 16:return[2,i]}})})},e.prototype.getGraphqlOperationType=function(e){var t=Ae(e);return Sn(t.definitions,1)[0].operation},e.prototype.graphql=function(e,t){var n=e.query,r=e.variables,i=void 0===r?{}:r,o=e.authMode,s=Ae("string"==typeof n?n:H(n)),a=Sn(s.definitions.filter(function(e){return"OperationDefinition"===e.kind}),1)[0],c=(void 0===a?{}:a).operation;switch(c){case"query":case"mutation":var u=this._api.getCancellableToken(),l=this._graphql({query:s,variables:i,authMode:o},t,{cancellableToken:u});return this._api.updateRequestToBeCancellable(l,u),l;case"subscription":return this._graphqlSubscribe({query:s,variables:i,authMode:o},t)}throw new Error("invalid operation type: "+c)},e.prototype._graphql=function(e,t,n){var r=e.query,i=e.variables,o=e.authMode;return void 0===t&&(t={}),void 0===n&&(n={}),On(this,void 0,void 0,function(){var e,s,a,c,u,l,f,p,h,d,y,v,g,b,_,m,w,E,T,I,O;return An(this,function(A){switch(A.label){case 0:return this._api?[3,2]:[4,this.createInstance()];case 1:A.sent(),A.label=2;case 2:return s=(e=this._options).aws_appsync_region,a=e.aws_appsync_graphqlEndpoint,u=void 0===(c=e.graphql_headers)?function(){return{}}:c,f=e.graphql_endpoint_iam_region,h=[{}],(d=!(l=e.graphql_endpoint))?[4,this._headerBasedAuth(o)]:[3,4];case 3:d=A.sent(),A.label=4;case 4:return y=[In.apply(void 0,h.concat([d]))],(v=l)?f?[4,this._headerBasedAuth(o)]:[3,6]:[3,8];case 5:return g=A.sent(),[3,7];case 6:g={Authorization:null},A.label=7;case 7:v=g,A.label=8;case 8:return b=[In.apply(void 0,y.concat([v]))],[4,u({query:r,variables:i})];case 9:if(p=In.apply(void 0,[In.apply(void 0,[In.apply(void 0,b.concat([A.sent()])),t]),!l&&(O={},O["x-amz-user-agent"]=It.userAgent,O)]),_={query:H(r),variables:i},m=Object.assign({headers:p,body:_,signerServiceInfo:{service:l?"execute-api":"appsync",region:l?f:s}},n),!(w=l||a))throw{data:{},errors:[new Z("No graphql endpoint provided.")]};A.label=10;case 10:return A.trys.push([10,12,,13]),[4,this._api.post(w,m)];case 11:return E=A.sent(),[3,13];case 12:if(T=A.sent(),this._api.isCancel(T))throw T;return E={data:{},errors:[new Z(T.message,null,null,null,null,T)]},[3,13];case 13:if((I=E.errors)&&I.length)throw E;return[2,E]}})})},e.prototype.isCancel=function(e){return this._api.isCancel(e)},e.prototype.cancel=function(e,t){return this._api.cancel(e,t)},e.prototype._graphqlSubscribe=function(e,t){var n=e.variables;void 0===t&&(t={});var r=this._options,i=r.aws_appsync_region,o=r.graphql_headers,s=void 0===o?function(){return{}}:o;if(En&&"function"==typeof En.subscribe)return En.subscribe("",{provider:St,appSyncGraphqlEndpoint:r.aws_appsync_graphqlEndpoint,authenticationType:e.authMode||r.aws_appsync_authenticationType||"AWS_IAM",apiKey:r.aws_appsync_apiKey,query:H(e.query),region:i,variables:n,graphql_headers:s,additionalHeaders:t});throw Nn.debug("No pubsub module applied for subscription"),new Error("No pubsub module applied for subscription")},e.prototype._ensureCredentials=function(){var e=this;return this.Credentials.get().then(function(t){if(!t)return!1;var n=e.Credentials.shear(t);return Nn.debug("set credentials for api",n),!0}).catch(function(e){return Nn.warn("ensure credentials error",e),!1})},e}(),Rn=new Cn(null);B.dQ.register(Rn);var Pn=function(){return(Pn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Mn=new p.k("API"),Ln=new(function(){function e(e){this.Auth=l.g,this.Cache=f.ZP,this.Credentials=h.cN,this._options=e,this._restApi=new j(e),this._graphqlApi=new Cn(e),Mn.debug("API Options",this._options)}return e.prototype.getModuleName=function(){return"API"},e.prototype.configure=function(e){this._options=Object.assign({},this._options,e),this._restApi.Credentials=this.Credentials,this._graphqlApi.Auth=this.Auth,this._graphqlApi.Cache=this.Cache,this._graphqlApi.Credentials=this.Credentials;var t=this._restApi.configure(this._options),n=this._graphqlApi.configure(this._options);return Pn(Pn({},t),n)},e.prototype.get=function(e,t,n){return this._restApi.get(e,t,n)},e.prototype.post=function(e,t,n){return this._restApi.post(e,t,n)},e.prototype.put=function(e,t,n){return this._restApi.put(e,t,n)},e.prototype.patch=function(e,t,n){return this._restApi.patch(e,t,n)},e.prototype.del=function(e,t,n){return this._restApi.del(e,t,n)},e.prototype.head=function(e,t,n){return this._restApi.head(e,t,n)},e.prototype.isCancel=function(e){return this._restApi.isCancel(e)},e.prototype.cancel=function(e,t){return this._restApi.cancel(e,t)},e.prototype.endpoint=function(e){return t=this,void 0,r=function(){return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(t){return[2,this._restApi.endpoint(e)]})},new((n=void 0)||(n=Promise))(function(e,i){function o(e){try{a(r.next(e))}catch(t){i(t)}}function s(e){try{a(r.throw(e))}catch(t){i(t)}}function a(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(e){e(r)})).then(o,s)}a((r=r.apply(t,[])).next())});var t,n,r},e.prototype.getGraphqlOperationType=function(e){return this._graphqlApi.getGraphqlOperationType(e)},e.prototype.graphql=function(e,t){return this._graphqlApi.graphql(e,t)},e}())(null);B.dQ.register(Ln);const Dn="\n  query ListFotoss(\n    $filter: ModelFotosFilterInput\n    $limit: Int\n    $nextToken: String\n  ) {\n    listFotoss(filter: $filter, limit: $limit, nextToken: $nextToken) {\n      items {\n        id\n        cliente\n        username\n        archivo\n        timestamp\n        file {\n          bucket\n          region\n          key\n        }\n        description\n        createdAt\n        updatedAt\n      }\n      nextToken\n    }\n  }\n";let Un=(()=>{class e{constructor(){}createFotos(e){return(0,a.mG)(this,void 0,void 0,function*(){console.log("Crear datos de foto",e),yield Ln.graphql(kn("\n  mutation CreateFotos(\n    $input: CreateFotosInput!\n    $condition: ModelFotosConditionInput\n  ) {\n    createFotos(input: $input, condition: $condition) {\n      id\n      cliente\n      username\n      archivo\n      timestamp\n      file {\n        bucket\n        region\n        key\n      }\n      description\n      createdAt\n      updatedAt\n    }\n  }\n",{input:e}))})}updateFotos(e){return(0,a.mG)(this,void 0,void 0,function*(){console.log("Actualizar datos de foto",e),yield Ln.graphql(kn("\n  mutation UpdateFotos(\n    $input: UpdateFotosInput!\n    $condition: ModelFotosConditionInput\n  ) {\n    updateFotos(input: $input, condition: $condition) {\n      id\n      cliente\n      username\n      archivo\n      timestamp\n      file {\n        bucket\n        region\n        key\n      }\n      description\n      createdAt\n      updatedAt\n    }\n  }\n",{input:e}))})}deleteFotos(e){return(0,a.mG)(this,void 0,void 0,function*(){console.log("Borrar foto por ID",e),yield Ln.graphql(kn("\n  mutation DeleteFotos(\n    $input: DeleteFotosInput!\n    $condition: ModelFotosConditionInput\n  ) {\n    deleteFotos(input: $input, condition: $condition) {\n      id\n      cliente\n      username\n      archivo\n      timestamp\n      file {\n        bucket\n        region\n        key\n      }\n      description\n      createdAt\n      updatedAt\n    }\n  }\n",{input:{id:e}}))})}listarFotos(){return(0,a.mG)(this,void 0,void 0,function*(){return yield Ln.graphql(kn(Dn))})}listarFotosFilter(e){return(0,a.mG)(this,void 0,void 0,function*(){const t=yield Ln.graphql(kn(Dn,{filter:e}));return console.log("Filter Fotos",t),t})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var xn=n(7271),Bn=n(4519);const Fn=[{path:"",component:(()=>{class e{constructor(e,t,n,r){this.graphServ=e,this.loaderService=t,this.dataServ=n,this.router=r,this.fileimg={name:null,lastModifiedDate:null},this.foto={cliente:null,username:null,archivo:null}}ngOnInit(){}upload(){return new Promise((e,t)=>(0,a.mG)(this,void 0,void 0,function*(){const n=document.querySelector("input");console.log("Iniciar file picker"),!n||!n.files||n.files.length<=0?t("No file selected."):(this.fileimg=n.files[0],this.base64File=yield this.convert(this.fileimg),e())}))}uploadAWS(e){if(e.valid){console.log(this.foto);const e=JSON.parse(localStorage.getItem("usuario")).username;console.log("Usuario a cargo",e),this.fileimg.name&&(this.loaderService.showLoader(),c.Ke.put(`imagenes/${e}/${this.fileimg.name}`,this.fileimg,{type:this.fileimg.type}).then(t=>{console.log("Respuesta de S3:",t),this.foto.archivo=t.key,this.loaderService.hideLoader();const n=new Date;this.foto.timestamp=n.toString(),this.foto.username=e,this.graphServ.createFotos(this.foto),this.dataServ.setDatosFoto(this.foto),this.dataServ.setFotoOriginal(this.base64File),this.router.navigateByUrl("/main/tabs/tab1")}).catch(e=>{console.log(e),this.loaderService.hideLoader(),alert("Error al subir informaci\xf3n, verificar sus datos...")}))}else alert("Los campos son obligatorios, revisar datos")}onClick(){const e={cliente:{eq:"Aconbol 2"}};console.log("Query con filtro",e),this.graphServ.listarFotosFilter(e)}convert(e){return new Promise((t,n)=>{const r=new FileReader;r&&e?(r.readAsDataURL(e),r.onload=()=>{t(r.result)},r.onerror=e=>{n(e)}):n("No file provided")})}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(Un),u.Y36(xn.D),u.Y36(Bn.D),u.Y36(s.F0))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-gallery"]],decls:42,vars:7,consts:[["slot","start"],["defaultHref","/","text","Regresar","color","primary","mode","ios"],["color","primary"],["fixed",""],["size","4"],[1,"title-block"],[1,"recuadro"],["color","secondary","type","file","accept","image/x-png,image/jpeg,image/gif",1,"file-input",3,"ionChange"],[3,"ngSubmit"],["fupAws","ngForm"],["type","text","name","cliente","color","secondary","required","true","minlength","3","placeholder","Nombres",3,"ngModel","ngModelChange"],["name","description","color","secondary","placeholder","Descripci\xf3n","required","",3,"ngModel","ngModelChange"],["block","","type","submit","shape","round","fill","outline","color","secondary"],["size","8"],[1,"imgcenter"],[3,"src"],[1,"fontcolor"],[1,"fontcolortitle"]],template:function(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"ion-header"),u.TgZ(1,"ion-toolbar"),u.TgZ(2,"ion-buttons",0),u._UZ(3,"ion-back-button",1),u.qZA(),u.TgZ(4,"ion-title",2),u._uU(5,"Galer\xeda de Fotos"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(6,"ion-content"),u.TgZ(7,"ion-grid",3),u.TgZ(8,"ion-row"),u.TgZ(9,"ion-col",4),u.TgZ(10,"ion-label",5),u._uU(11,"Elegir Fotograf\xeda"),u.qZA(),u.TgZ(12,"div",6),u.TgZ(13,"ion-input",7),u.NdJ("ionChange",function(){return t.upload()}),u.qZA(),u.qZA(),u.TgZ(14,"ion-label",5),u._uU(15,"Datos Fotograf\xeda"),u.qZA(),u.TgZ(16,"form",8,9),u.NdJ("ngSubmit",function(){u.CHM(e);const n=u.MAs(17);return t.uploadAWS(n)}),u.TgZ(18,"div",6),u.TgZ(19,"ion-label"),u._uU(20,"Cliente:"),u.qZA(),u.TgZ(21,"ion-input",10),u.NdJ("ngModelChange",function(e){return t.foto.cliente=e}),u.qZA(),u._UZ(22,"hr"),u.TgZ(23,"ion-label"),u._uU(24,"Descripci\xf3n:"),u.qZA(),u.TgZ(25,"ion-textarea",11),u.NdJ("ngModelChange",function(e){return t.foto.description=e}),u.qZA(),u._UZ(26,"hr"),u.TgZ(27,"ion-button",12),u._uU(28,"Aceptar "),u.qZA(),u.TgZ(29,"p"),u._uU(30,"* Los Campos son obligatorios"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(31,"ion-col",13),u.TgZ(32,"ion-card"),u.TgZ(33,"div",14),u._UZ(34,"img",15),u.qZA(),u.TgZ(35,"ion-card-header"),u.TgZ(36,"ion-card-subtitle",16),u._uU(37),u.qZA(),u.TgZ(38,"ion-card-title",17),u._uU(39),u.qZA(),u.qZA(),u.TgZ(40,"ion-card-content",16),u._uU(41),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()}2&e&&(u.xp6(21),u.Q6J("ngModel",t.foto.cliente),u.xp6(4),u.Q6J("ngModel",t.foto.description),u.xp6(9),u.Q6J("src",t.base64File,u.LSH),u.xp6(3),u.AsE(" Tipo: ",t.fileimg.type," - Tama\xf1o: ",(t.fileimg.size/1024).toFixed(1),"KB "),u.xp6(2),u.hij(" Archivo: ",t.fileimg.name," "),u.xp6(2),u.hij(" Ultima Modificaci\xf3n ",t.fileimg.lastModifiedDate," "))},directives:[o.Gu,o.sr,o.Sm,o.oU,o.cs,o.wd,o.W2,o.jY,o.Nd,o.wI,o.Q$,o.pK,o.j9,i._Y,i.JL,i.F,i.Q7,i.wO,i.JJ,i.On,o.g2,o.YG,o.PM,o.Zi,o.tO,o.gZ,o.FN],styles:["ion-card[_ngcontent-%COMP%]{background-color:var(--ion-color-primary-shade)}.imgcenter[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:0;padding-left:3px;padding-right:3px}.imgcenter[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:3px;width:100%;border-radius:10px}.file-input[_ngcontent-%COMP%]{color:#0000}.title-block[_ngcontent-%COMP%]{color:var(--ion-color-secondary-shade);font-size:large;font-weight:500}.recuadro[_ngcontent-%COMP%]{margin-top:0;margin-bottom:20px;border-radius:5%;padding:10% 5% 0;border:2px solid;border-color:var(--ion-color-tertiary)}.recuadro[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{padding-left:0!important;padding-right:0;margin-left:0;margin-right:0}.recuadro[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-tertiary);font-size:small}hr[_ngcontent-%COMP%]{background-color:var(--ion-color-tertiary);height:1px;margin-top:0;margin-bottom:10px}.fontcolor[_ngcontent-%COMP%]{color:var(--ion-color-tertiary-tint);font-weight:700;font-size:medium}.fontcolortitle[_ngcontent-%COMP%]{color:#d7d8da}"]}),e})()}];let qn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[s.Bz.forChild(Fn)],s.Bz]}),e})(),jn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[r.ez,i.u5,o.Pc,qn]]}),e})()},3933:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__extends:()=>i,__assign:()=>o,__rest:()=>s,__decorate:()=>a,__param:()=>c,__metadata:()=>u,__awaiter:()=>l,__generator:()=>f,__createBinding:()=>p,__exportStar:()=>h,__values:()=>d,__read:()=>y,__spread:()=>v,__spreadArrays:()=>g,__await:()=>b,__asyncGenerator:()=>_,__asyncDelegator:()=>m,__asyncValues:()=>w,__makeTemplateObject:()=>E,__importStar:()=>T,__importDefault:()=>I,__classPrivateFieldGet:()=>O,__classPrivateFieldSet:()=>A});var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function a(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function c(e,t){return function(n,r){t(n,r,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})}function f(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function p(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function h(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function d(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function y(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(y(arguments[t]));return e}function g(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function _(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise(function(n,r){o.push([e,t,n,r])>1||a(e,t)})})}function a(e,t){try{(n=i[e](t)).value instanceof b?Promise.resolve(n.value.v).then(c,u):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function c(e){a("next",e)}function u(e){a("throw",e)}function l(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function m(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:b(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=d(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,i){!function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}(r,i,(t=e[n](t)).done,t.value)})}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function T(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function I(e){return e&&e.__esModule?e:{default:e}}function O(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function A(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}}}]);